[
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-acm_certificate",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-acm_certificate",
      "is_enabled": true,
      "name": "stag-producer-acm_certificate",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(21/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-acm_certificate",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-acm_certificate-stag_acm_certificate_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-acm_certificate",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_acm_certificate_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-acm_certificate",
      "description": "stag consumer-acm_certificate policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-acm_certificate",
      "name": "stag-consumer-acm_certificate",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-acm_certificate\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-acm_certificate",
      "description": "stag producer-acm_certificate policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-acm_certificate",
      "name": "stag-producer-acm_certificate",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-acm_certificate\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-acm_certificate",
      "name": "stag-consumer-acm_certificate",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-acm_certificate",
      "roles": [
        "stag-consumer-acm_certificate"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-acm_certificate",
      "name": "stag-producer-acm_certificate",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-acm_certificate",
      "roles": [
        "stag-producer-acm_certificate"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-acm_certificate",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-02-06T10:27:33Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-acm_certificate",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-acm_certificate"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-acm_certificate",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDANX6AST2X"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-acm_certificate",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-02-06T10:27:33Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-acm_certificate",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-acm_certificate"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-acm_certificate",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDGIBCAGFCM"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-acm_certificate",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-acm_certificate",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-acm_certificate",
      "id": "3989e635-4f35-4ec8-93ba-68542b643ef7",
      "last_modified": "2021-02-06T10:37:52Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "3989e635-4f35-4ec8-93ba-68542b643ef7"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-acm_certificate",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-acm_certificate",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-acm_certificate",
      "handler": "fetchers/index.acmCertificate",
      "id": "stag-consumer-acm_certificate",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-acm_certificate/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:01.494+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-acm_certificate:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-acm_certificate",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-078bf2d7467ec3548"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-acm_certificate",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-acm_certificate",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-acm_certificate",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-acm_certificate",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-acm_certificate/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:05.107+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-acm_certificate:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-acm_certificate",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-032ac11db5145e8d9"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-acm_certificate",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-acm_certificate",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-078bf2d7467ec3548",
      "description": "stag consumer-acm_certificate securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-078bf2d7467ec3548",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-acm_certificate",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-acm_certificate-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-032ac11db5145e8d9",
      "description": "stag producer-acm_certificate securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-032ac11db5145e8d9",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-acm_certificate",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-acm_certificate-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-acm_certificate",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-acm_certificate",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-acm_certificate",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "auth0_client",
    "name": "app_server",
    "attributes": {
      "addons": [],
      "allowed_logout_urls": [],
      "allowed_origins": [],
      "app_type": "non_interactive",
      "callbacks": [],
      "client_id": "kEjj2QkFV5D7Eny44IcuCerSJ0iCtmAk",
      "client_metadata": {},
      "client_secret": "vkoPLyAGz4d4biAhJOMBL9qxtgq7OKIwCUQbgzXAku3TcAi-7PfgAOrIdr_Mz50F",
      "client_secret_rotation_trigger": null,
      "cross_origin_auth": false,
      "cross_origin_loc": "",
      "custom_login_page": "",
      "custom_login_page_on": true,
      "custom_login_page_preview": "",
      "description": "App-Server from terraform",
      "encryption_key": {},
      "form_template": "",
      "grant_types": [
        "client_credentials"
      ],
      "id": "kEjj2QkFV5D7Eny44IcuCerSJ0iCtmAk",
      "initiate_login_uri": "",
      "is_first_party": true,
      "is_token_endpoint_ip_header_trusted": false,
      "jwt_configuration": [
        {
          "alg": "RS256",
          "lifetime_in_seconds": 0,
          "scopes": {},
          "secret_encoded": false
        }
      ],
      "logo_uri": "",
      "mobile": [],
      "name": "Infralight App-Server",
      "oidc_conformant": true,
      "refresh_token": [
        {
          "expiration_type": "non-expiring",
          "idle_token_lifetime": 2592000,
          "infinite_idle_token_lifetime": true,
          "infinite_token_lifetime": true,
          "leeway": 0,
          "rotation_type": "non-rotating",
          "token_lifetime": 31557600
        }
      ],
      "sso": false,
      "sso_disabled": false,
      "token_endpoint_auth_method": "client_secret_post",
      "web_origins": []
    }
  },
  {
    "type": "auth0_client",
    "name": "dashboard",
    "attributes": {
      "addons": [],
      "allowed_logout_urls": [
        "http://localhost:3000/",
        "https://stag.infralight.cloud/"
      ],
      "allowed_origins": [],
      "app_type": "spa",
      "callbacks": [
        "http://localhost:3000/",
        "https://stag.infralight.cloud/"
      ],
      "client_id": "5z14RCSzMxyEuX2vwlenLjWXTZKhl3Wq",
      "client_metadata": {},
      "client_secret": "Wg_tMnbIg41AGYUMIZNRcEHPflXYwnafVWd9l4QpZ1uQGT75c_P5N65_z7gjiRMK",
      "client_secret_rotation_trigger": null,
      "cross_origin_auth": false,
      "cross_origin_loc": "",
      "custom_login_page": "",
      "custom_login_page_on": true,
      "custom_login_page_preview": "",
      "description": "Dashboard from terraform",
      "encryption_key": {},
      "form_template": "",
      "grant_types": [
        "refresh_token",
        "implicit",
        "authorization_code"
      ],
      "id": "5z14RCSzMxyEuX2vwlenLjWXTZKhl3Wq",
      "initiate_login_uri": "",
      "is_first_party": true,
      "is_token_endpoint_ip_header_trusted": false,
      "jwt_configuration": [
        {
          "alg": "RS256",
          "lifetime_in_seconds": 0,
          "scopes": {},
          "secret_encoded": false
        }
      ],
      "logo_uri": "",
      "mobile": [],
      "name": "Infralight Dashboard",
      "oidc_conformant": true,
      "refresh_token": [
        {
          "expiration_type": "expiring",
          "idle_token_lifetime": 1296000,
          "infinite_idle_token_lifetime": false,
          "infinite_token_lifetime": true,
          "leeway": 0,
          "rotation_type": "rotating",
          "token_lifetime": 2592000
        }
      ],
      "sso": false,
      "sso_disabled": false,
      "token_endpoint_auth_method": "none",
      "web_origins": [
        "http://localhost:3000/",
        "https://stag.infralight.cloud/"
      ]
    }
  },
  {
    "type": "auth0_client",
    "name": "fetchers",
    "attributes": {
      "addons": [],
      "allowed_logout_urls": [],
      "allowed_origins": [],
      "app_type": "non_interactive",
      "callbacks": [],
      "client_id": "TEiwhn2pOVrrFUivTf7RkIPk4iFezOgs",
      "client_metadata": {},
      "client_secret": "fGh8LkEVtFHPIDMlagZnB-lmaYGFa41pA9arhTf6KbSyEVmdCzX4Fhst4V5JK3Ch",
      "client_secret_rotation_trigger": null,
      "cross_origin_auth": false,
      "cross_origin_loc": "",
      "custom_login_page": "",
      "custom_login_page_on": true,
      "custom_login_page_preview": "",
      "description": "Fetchers from terraform",
      "encryption_key": {},
      "form_template": "",
      "grant_types": [
        "client_credentials"
      ],
      "id": "TEiwhn2pOVrrFUivTf7RkIPk4iFezOgs",
      "initiate_login_uri": "",
      "is_first_party": true,
      "is_token_endpoint_ip_header_trusted": false,
      "jwt_configuration": [
        {
          "alg": "RS256",
          "lifetime_in_seconds": 0,
          "scopes": {},
          "secret_encoded": false
        }
      ],
      "logo_uri": "",
      "mobile": [],
      "name": "Infralight Fetchers",
      "oidc_conformant": true,
      "refresh_token": [
        {
          "expiration_type": "non-expiring",
          "idle_token_lifetime": 2592000,
          "infinite_idle_token_lifetime": true,
          "infinite_token_lifetime": true,
          "leeway": 0,
          "rotation_type": "non-rotating",
          "token_lifetime": 31557600
        }
      ],
      "sso": false,
      "sso_disabled": false,
      "token_endpoint_auth_method": "client_secret_post",
      "web_origins": []
    }
  },
  {
    "type": "auth0_client_grant",
    "name": "infralight_api_grant",
    "attributes": {
      "audience": "infralight-api",
      "client_id": "kEjj2QkFV5D7Eny44IcuCerSJ0iCtmAk",
      "id": "cgr_QgMMoElwK7AX7jhd",
      "scope": []
    }
  },
  {
    "type": "auth0_client_grant",
    "name": "infralight_fetchers_grant",
    "attributes": {
      "audience": "infralight-api",
      "client_id": "TEiwhn2pOVrrFUivTf7RkIPk4iFezOgs",
      "id": "cgr_unbn3NFZUC8uCrHS",
      "scope": []
    }
  },
  {
    "type": "auth0_client_grant",
    "name": "management_api_grant",
    "attributes": {
      "audience": "https://staging-infralight.us.auth0.com/api/v2/",
      "client_id": "kEjj2QkFV5D7Eny44IcuCerSJ0iCtmAk",
      "id": "cgr_z2E0nZGYGHFUV67Y",
      "scope": [
        "read:users",
        "update:users",
        "delete:users",
        "create:users",
        "read:users_app_metadata",
        "update:users_app_metadata",
        "delete:users_app_metadata",
        "create:users_app_metadata"
      ]
    }
  },
  {
    "type": "auth0_connection",
    "name": "github_connection",
    "attributes": {
      "display_name": null,
      "enabled_clients": [
        "5z14RCSzMxyEuX2vwlenLjWXTZKhl3Wq",
        "kEjj2QkFV5D7Eny44IcuCerSJ0iCtmAk"
      ],
      "id": "con_dY5pVgnhkWMuJisv",
      "is_domain_connection": false,
      "name": "github-integration",
      "options": [
        {
          "adfs_server": "",
          "allowed_audiences": [],
          "api_enable_users": false,
          "app_domain": "",
          "app_id": "",
          "authorization_endpoint": "",
          "brute_force_protection": false,
          "client_id": "1cd064ab6be64141713a",
          "client_secret": "b84abaf1650383fa37c399d686c32f2a59589829",
          "community_base_url": "",
          "configuration": {},
          "custom_scripts": {},
          "debug": false,
          "digest_algorithm": "",
          "disable_cache": false,
          "disable_signup": false,
          "discovery_url": "",
          "domain": "",
          "domain_aliases": [],
          "enabled_database_customization": false,
          "fields_map": {},
          "from": "",
          "icon_url": "",
          "identity_api": "",
          "idp_initiated": [],
          "import_mode": false,
          "ips": [],
          "issuer": "",
          "jwks_uri": "",
          "key_id": "",
          "max_groups_to_retrieve": "",
          "messaging_service_sid": "",
          "mfa": [],
          "name": "",
          "password_complexity_options": [],
          "password_dictionary": [],
          "password_history": [],
          "password_no_personal_info": [],
          "password_policy": "",
          "protocol_binding": "",
          "request_template": "",
          "requires_username": false,
          "scopes": [
            "email"
          ],
          "scripts": {},
          "set_user_root_attributes": "",
          "sign_in_endpoint": "",
          "sign_out_endpoint": "",
          "sign_saml_request": false,
          "signature_algorithm": "",
          "signing_cert": "",
          "strategy_version": 0,
          "subject": "",
          "syntax": "",
          "team_id": "",
          "template": "",
          "tenant_domain": "",
          "token_endpoint": "",
          "totp": [],
          "twilio_sid": "",
          "twilio_token": "",
          "type": "",
          "use_cert_auth": false,
          "use_kerberos": false,
          "use_wsfed": false,
          "user_id_attribute": "",
          "userinfo_endpoint": "",
          "validation": [],
          "waad_common_endpoint": false,
          "waad_protocol": ""
        }
      ],
      "realms": [
        "github-integration"
      ],
      "strategy": "github",
      "strategy_version": null,
      "validation": null
    }
  },
  {
    "type": "auth0_connection",
    "name": "google_oauth2_connection",
    "attributes": {
      "display_name": null,
      "enabled_clients": [
        "5z14RCSzMxyEuX2vwlenLjWXTZKhl3Wq",
        "kEjj2QkFV5D7Eny44IcuCerSJ0iCtmAk"
      ],
      "id": "con_TVHxqKqKlxjLQc1c",
      "is_domain_connection": false,
      "name": "google-outh2-integration",
      "options": [
        {
          "adfs_server": "",
          "allowed_audiences": [],
          "api_enable_users": false,
          "app_domain": "",
          "app_id": "",
          "authorization_endpoint": "",
          "brute_force_protection": false,
          "client_id": "633304011782-t15qs4ha5dj4mjt7rene2kqoa8lonucf.apps.googleusercontent.com",
          "client_secret": "6EDkl10b0qKYSMmsWvOzsk0f",
          "community_base_url": "",
          "configuration": {},
          "custom_scripts": {},
          "debug": false,
          "digest_algorithm": "",
          "disable_cache": false,
          "disable_signup": false,
          "discovery_url": "",
          "domain": "",
          "domain_aliases": [],
          "enabled_database_customization": false,
          "fields_map": {},
          "from": "",
          "icon_url": "",
          "identity_api": "",
          "idp_initiated": [],
          "import_mode": false,
          "ips": [],
          "issuer": "",
          "jwks_uri": "",
          "key_id": "",
          "max_groups_to_retrieve": "",
          "messaging_service_sid": "",
          "mfa": [],
          "name": "",
          "password_complexity_options": [],
          "password_dictionary": [],
          "password_history": [],
          "password_no_personal_info": [],
          "password_policy": "",
          "protocol_binding": "",
          "request_template": "",
          "requires_username": false,
          "scopes": [
            "email",
            "profile"
          ],
          "scripts": {},
          "set_user_root_attributes": "",
          "sign_in_endpoint": "",
          "sign_out_endpoint": "",
          "sign_saml_request": false,
          "signature_algorithm": "",
          "signing_cert": "",
          "strategy_version": 0,
          "subject": "",
          "syntax": "",
          "team_id": "",
          "template": "",
          "tenant_domain": "",
          "token_endpoint": "",
          "totp": [],
          "twilio_sid": "",
          "twilio_token": "",
          "type": "",
          "use_cert_auth": false,
          "use_kerberos": false,
          "use_wsfed": false,
          "user_id_attribute": "",
          "userinfo_endpoint": "",
          "validation": [],
          "waad_common_endpoint": false,
          "waad_protocol": ""
        }
      ],
      "realms": [
        "google-outh2-integration"
      ],
      "strategy": "google-oauth2",
      "strategy_version": null,
      "validation": null
    }
  },
  {
    "type": "auth0_custom_domain",
    "name": "infralight_custom_domain",
    "attributes": {
      "domain": "stagauth.infralight.cloud",
      "id": "cd_JHNeW27dV0pKtc5w",
      "primary": true,
      "status": "ready",
      "type": "auth0_managed_certs",
      "verification": [
        {
          "methods": [
            {
              "name": "cname",
              "record": "staging-infralight-cd-jhnew27dv0pktc5w.edge.tenants.us.auth0.com"
            }
          ]
        }
      ],
      "verification_method": "txt"
    }
  },
  {
    "type": "auth0_email",
    "name": "infralight_email_provider",
    "attributes": {
      "credentials": [
        {
          "access_key_id": "",
          "api_key": "",
          "api_user": "",
          "domain": "",
          "region": "",
          "secret_access_key": "",
          "smtp_host": "smtp.gmail.com",
          "smtp_pass": "LgTWA4>V",
          "smtp_port": 465,
          "smtp_user": "noreply@infralight.co"
        }
      ],
      "default_from_address": "noreply@infralight.co",
      "enabled": true,
      "id": "smtp",
      "name": "smtp"
    }
  },
  {
    "type": "auth0_resource_server",
    "name": "infralight_api",
    "attributes": {
      "allow_offline_access": false,
      "enforce_policies": false,
      "id": "6042c4d65bffdd003e4a42d4",
      "identifier": "infralight-api",
      "name": "Infralight API",
      "options": {},
      "scopes": [],
      "signing_alg": "RS256",
      "signing_secret": "",
      "skip_consent_for_verifiable_first_party_clients": true,
      "token_dialect": "",
      "token_lifetime": 86400,
      "token_lifetime_for_web": 7200,
      "verification_location": ""
    }
  },
  {
    "type": "auth0_rule",
    "name": "add_environment_and_account_ids_token_rule",
    "attributes": {
      "enabled": true,
      "id": "rul_DqsDEX6ufqPz3nI6",
      "name": "Add environment and account IDs token",
      "order": 1,
      "script": "function(user, context, callback) {\n  user.app_metadata = user.app_metadata || {};\n  context.idToken['https://infralight.co/env_id'] = user.app_metadata.env_id;\n  context.idToken['https://infralight.co/account_id'] = user.app_metadata.account_id;\n  callback(null, user, context);\n}\n"
    }
  },
  {
    "type": "auth0_rule",
    "name": "add_user_data_to_jwt_tokens_rule",
    "attributes": {
      "enabled": true,
      "id": "rul_G9rLrELM7PZ5SMMM",
      "name": "Add user data to JWT tokens",
      "order": 1,
      "script": "function addEmailToAccessToken(user, context, callback) {\n  // This rule adds the authenticated user's email address to the access token.\n\n  var namespace = 'https://infralight.co/';\n\n  user.app_metadata = user.app_metadata || {};\n  context.accessToken[namespace + 'account_id'] = user.app_metadata.account_id;\n  context.accessToken[namespace + 'email'] = user.email;\n  context.accessToken[namespace + 'name'] = user.name;\n  return callback(null, user, context);\n}\n"
    }
  },
  {
    "type": "auth0_rule",
    "name": "force_email_verification_rule",
    "attributes": {
      "enabled": true,
      "id": "rul_gj6lCO9ZsB89zTrK",
      "name": "Force email verification",
      "order": 1,
      "script": "function emailVerified(user, context, callback) {\n  if (!user.email_verified) {\n    return callback(\n      new UnauthorizedError('Please verify your email before logging in.')\n    );\n  } else {\n    return callback(null, user, context);\n  }\n}\n"
    }
  },
  {
    "type": "auth0_rule",
    "name": "verify_user_email_with_password_reset_rule",
    "attributes": {
      "enabled": true,
      "id": "rul_KtEsdk6e9WSTvrY4",
      "name": "Verify user email with password reset",
      "order": 1,
      "script": "function verifyUserWithPasswordReset(user, context, callback) {\n  const request = require('request');\n  const userApiUrl = auth0.baseUrl + '/users/';\n\n  // This rule is only for Auth0 databases\n  if (context.connectionStrategy !== 'auth0') {\n    return callback(null, user, context);\n  }\n\n  if (user.email_verified || !user.last_password_reset) {\n    return callback(null, user, context);\n  }\n\n  // Set email verified if a user has already updated his/her password\n  request.patch(\n    {\n      url: userApiUrl + user.user_id,\n      headers: {\n        Authorization: 'Bearer ' + auth0.accessToken\n      },\n      json: { email_verified: true },\n      timeout: 5000\n    },\n    function (err, response, body) {\n      // Setting email verified isn't propagated to id_token in this\n      // authentication cycle so explicitly set it to true given no errors.\n      context.idToken.email_verified = !err && response.statusCode === 200;\n\n      // Return with success at this point.\n      return callback(null, user, context);\n    }\n  );\n}\n"
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-auto_scaling_group",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-auto_scaling_group",
      "is_enabled": true,
      "name": "stag-producer-auto_scaling_group",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(19/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-auto_scaling_group",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-auto_scaling_group-stag_auto_scaling_group_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-auto_scaling_group",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_auto_scaling_group_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-auto_scaling_group",
      "description": "stag consumer-auto_scaling_group policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-auto_scaling_group",
      "name": "stag-consumer-auto_scaling_group",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-auto_scaling_group\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-auto_scaling_group",
      "description": "stag producer-auto_scaling_group policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-auto_scaling_group",
      "name": "stag-producer-auto_scaling_group",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-auto_scaling_group\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-auto_scaling_group",
      "name": "stag-consumer-auto_scaling_group",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-auto_scaling_group",
      "roles": [
        "stag-consumer-auto_scaling_group"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-auto_scaling_group",
      "name": "stag-producer-auto_scaling_group",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-auto_scaling_group",
      "roles": [
        "stag-producer-auto_scaling_group"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-auto_scaling_group",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-28T12:38:45Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-auto_scaling_group",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-auto_scaling_group"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-auto_scaling_group",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDP2YWAWGIQ"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-auto_scaling_group",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-28T12:38:45Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-auto_scaling_group",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-auto_scaling_group"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-auto_scaling_group",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDIQYBWK7Z3"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-auto_scaling_group",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-auto_scaling_group",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-auto_scaling_group",
      "id": "87ef8531-86b3-4915-95f8-11a44f0ff7da",
      "last_modified": "2021-01-28T12:51:57Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "87ef8531-86b3-4915-95f8-11a44f0ff7da"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-auto_scaling_group",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-auto_scaling_group",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-auto_scaling_group",
      "handler": "fetchers/index.autoScalingGroup",
      "id": "stag-consumer-auto_scaling_group",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-auto_scaling_group/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:34:38.089+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-auto_scaling_group:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-auto_scaling_group",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-09f1bd917497cfff0"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-auto_scaling_group",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-auto_scaling_group",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-auto_scaling_group",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-auto_scaling_group",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-auto_scaling_group/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:34:50.015+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-auto_scaling_group:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-auto_scaling_group",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0f6800eb8218dc45e"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-auto_scaling_group",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-auto_scaling_group",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-09f1bd917497cfff0",
      "description": "stag consumer-auto_scaling_group securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-09f1bd917497cfff0",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-auto_scaling_group",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-auto_scaling_group-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0f6800eb8218dc45e",
      "description": "stag producer-auto_scaling_group securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0f6800eb8218dc45e",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-auto_scaling_group",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-auto_scaling_group-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-auto_scaling_group",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-auto_scaling_group",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-auto_scaling_group",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "aws_ami",
    "name": "ubuntu",
    "attributes": {
      "architecture": "x86_64",
      "arn": "arn:aws:ec2:us-west-2::image/ami-07e573cdaa16d4e61",
      "block_device_mappings": [
        {
          "device_name": "/dev/sda1",
          "ebs": {
            "delete_on_termination": "true",
            "encrypted": "false",
            "iops": "0",
            "snapshot_id": "snap-00adfa1d1e67f8dd0",
            "throughput": "0",
            "volume_size": "8",
            "volume_type": "gp2"
          },
          "no_device": "",
          "virtual_name": ""
        },
        {
          "device_name": "/dev/sdb",
          "ebs": {},
          "no_device": "",
          "virtual_name": "ephemeral0"
        },
        {
          "device_name": "/dev/sdc",
          "ebs": {},
          "no_device": "",
          "virtual_name": "ephemeral1"
        }
      ],
      "creation_date": "2021-03-16T00:50:47.000Z",
      "description": "Canonical, Ubuntu, 20.04 LTS, amd64 focal image build on 2021-03-15",
      "ena_support": true,
      "executable_users": null,
      "filter": [
        {
          "name": "name",
          "values": [
            "ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*"
          ]
        },
        {
          "name": "virtualization-type",
          "values": [
            "hvm"
          ]
        }
      ],
      "hypervisor": "xen",
      "id": "ami-07e573cdaa16d4e61",
      "image_id": "ami-07e573cdaa16d4e61",
      "image_location": "099720109477/ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-20210315",
      "image_owner_alias": null,
      "image_type": "machine",
      "kernel_id": null,
      "most_recent": true,
      "name": "ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-20210315",
      "name_regex": null,
      "owner_id": "099720109477",
      "owners": [
        "099720109477"
      ],
      "platform": null,
      "platform_details": "Linux/UNIX",
      "product_codes": [],
      "public": true,
      "ramdisk_id": null,
      "root_device_name": "/dev/sda1",
      "root_device_type": "ebs",
      "root_snapshot_id": "snap-00adfa1d1e67f8dd0",
      "sriov_net_support": "simple",
      "state": "available",
      "state_reason": {
        "code": "UNSET",
        "message": "UNSET"
      },
      "tags": {},
      "usage_operation": "RunInstances",
      "virtualization_type": "hvm"
    }
  },
  {
    "type": "aws_region",
    "name": "current",
    "attributes": {
      "description": "US West (Oregon)",
      "endpoint": "ec2.us-west-2.amazonaws.com",
      "id": "us-west-2",
      "name": "us-west-2"
    }
  },
  {
    "type": "aws_autoscaling_attachment",
    "name": "backend",
    "attributes": {
      "alb_target_group_arn": "arn:aws:elasticloadbalancing:us-west-2:012345678901:targetgroup/stag-backend/09c2d5749ce2236d",
      "autoscaling_group_name": "stag-backend",
      "elb": null,
      "id": "stag-backend-20210108135450183500000002"
    }
  },
  {
    "type": "aws_autoscaling_group",
    "name": "backend",
    "attributes": {
      "arn": "arn:aws:autoscaling:us-west-2:012345678901:autoScalingGroup:95f0b269-c7fe-41a4-ac54-1d44ba196461:autoScalingGroupName/stag-backend",
      "availability_zones": [
        "us-west-2a",
        "us-west-2b"
      ],
      "capacity_rebalance": false,
      "default_cooldown": 300,
      "desired_capacity": 1,
      "enabled_metrics": [],
      "force_delete": true,
      "health_check_grace_period": 300,
      "health_check_type": "EC2",
      "id": "stag-backend",
      "initial_lifecycle_hook": [],
      "instance_refresh": [],
      "launch_configuration": "stag-backend",
      "launch_template": [],
      "load_balancers": [],
      "max_instance_lifetime": 0,
      "max_size": 1,
      "metrics_granularity": "1Minute",
      "min_elb_capacity": null,
      "min_size": 1,
      "mixed_instances_policy": [],
      "name": "stag-backend",
      "name_prefix": null,
      "placement_group": "",
      "protect_from_scale_in": false,
      "service_linked_role_arn": "arn:aws:iam::012345678901:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling",
      "suspended_processes": [],
      "tag": [
        {
          "key": "Name",
          "propagate_at_launch": true,
          "value": "stag backend"
        }
      ],
      "tags": null,
      "target_group_arns": [
        "arn:aws:elasticloadbalancing:us-west-2:012345678901:targetgroup/stag-backend/09c2d5749ce2236d"
      ],
      "termination_policies": [
        "OldestInstance"
      ],
      "timeouts": {
        "delete": "1m"
      },
      "vpc_zone_identifier": [
        "subnet-0c3ff7b11dace5f50",
        "subnet-0f18059eb5bd25851"
      ],
      "wait_for_capacity_timeout": "10m",
      "wait_for_elb_capacity": null
    }
  },
  {
    "type": "aws_iam_instance_profile",
    "name": "backend",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:instance-profile/stag-backend",
      "create_date": "2020-12-07T13:53:14Z",
      "id": "stag-backend",
      "name": "stag-backend",
      "name_prefix": null,
      "path": "/",
      "role": "stag_backend_role",
      "unique_id": "AIPARMDQF5IDN7RRXOKFA"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "backend",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag_backend_role",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-12-06T19:10:17Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag_backend_role",
      "inline_policy": [
        {
          "name": "stag_backend_policy",
          "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n        \"Sid\": \"VisualEditor0\",\n        \"Effect\": \"Allow\",\n        \"Action\": \"sts:AssumeRole\",\n        \"Resource\": \"*\"\n    }\n  ]\n}\n"
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::aws:policy/AdministratorAccess"
      ],
      "max_session_duration": 3600,
      "name": "stag_backend_role",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {
        "tag-key": "tag-value"
      },
      "unique_id": "AROARMDQF5IDHSNUD4AP3"
    }
  },
  {
    "type": "aws_iam_role_policy",
    "name": "backend",
    "attributes": {
      "id": "stag_backend_role:stag_backend_policy",
      "name": "stag_backend_policy",
      "name_prefix": null,
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n        \"Sid\": \"VisualEditor0\",\n        \"Effect\": \"Allow\",\n        \"Action\": \"sts:AssumeRole\",\n        \"Resource\": \"*\"\n    }\n  ]\n}\n",
      "role": "stag_backend_role"
    }
  },
  {
    "type": "aws_launch_configuration",
    "name": "backend",
    "attributes": {
      "arn": "arn:aws:autoscaling:us-west-2:012345678901:launchConfiguration:355f5a4e-e8d9-4fda-94c4-0c10d48bbec3:launchConfigurationName/stag-backend",
      "associate_public_ip_address": true,
      "ebs_block_device": [],
      "ebs_optimized": false,
      "enable_monitoring": false,
      "ephemeral_block_device": [],
      "iam_instance_profile": "stag-backend",
      "id": "stag-backend",
      "image_id": "ami-089668cd321f3cf82",
      "instance_type": "t2.medium",
      "key_name": "stag",
      "metadata_options": [],
      "name": "stag-backend",
      "name_prefix": null,
      "placement_tenancy": null,
      "root_block_device": [],
      "security_groups": [
        "sg-0b7da4b27b0d9caf0"
      ],
      "spot_price": "",
      "user_data": "02ed7589c45ff7ba6f71bcfa61c112bbe842a6e6",
      "user_data_base64": null,
      "vpc_classic_link_id": "",
      "vpc_classic_link_security_groups": []
    }
  },
  {
    "type": "aws_lb",
    "name": "backend",
    "attributes": {
      "access_logs": [
        {
          "bucket": "",
          "enabled": false,
          "prefix": ""
        }
      ],
      "arn": "arn:aws:elasticloadbalancing:us-west-2:012345678901:loadbalancer/app/stag-backend/7853d663b8460cb8",
      "arn_suffix": "app/stag-backend/7853d663b8460cb8",
      "customer_owned_ipv4_pool": "",
      "dns_name": "stag-backend-190689706.us-west-2.elb.amazonaws.com",
      "drop_invalid_header_fields": false,
      "enable_cross_zone_load_balancing": null,
      "enable_deletion_protection": true,
      "enable_http2": true,
      "id": "arn:aws:elasticloadbalancing:us-west-2:012345678901:loadbalancer/app/stag-backend/7853d663b8460cb8",
      "idle_timeout": 60,
      "internal": false,
      "ip_address_type": "ipv4",
      "load_balancer_type": "application",
      "name": "stag-backend",
      "name_prefix": null,
      "security_groups": [
        "sg-0b7da4b27b0d9caf0"
      ],
      "subnet_mapping": [
        {
          "allocation_id": "",
          "ipv6_address": "",
          "outpost_id": "",
          "private_ipv4_address": "",
          "subnet_id": "subnet-08b3dc579159a77f9"
        },
        {
          "allocation_id": "",
          "ipv6_address": "",
          "outpost_id": "",
          "private_ipv4_address": "",
          "subnet_id": "subnet-093a001e537625da2"
        }
      ],
      "subnets": [
        "subnet-08b3dc579159a77f9",
        "subnet-093a001e537625da2"
      ],
      "tags": {
        "env": "stag"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670",
      "zone_id": "Z1H1FL5HABSF5"
    }
  },
  {
    "type": "aws_lb_listener",
    "name": "if-acm",
    "attributes": {
      "arn": "arn:aws:elasticloadbalancing:us-west-2:012345678901:listener/app/stag-backend/7853d663b8460cb8/9c40e9e8b194d9d6",
      "certificate_arn": "arn:aws:acm:us-west-2:012345678901:certificate/258d2c95-3975-4dca-9bac-3485443a1327",
      "default_action": [
        {
          "authenticate_cognito": [],
          "authenticate_oidc": [],
          "fixed_response": [],
          "forward": [],
          "order": 1,
          "redirect": [],
          "target_group_arn": "arn:aws:elasticloadbalancing:us-west-2:012345678901:targetgroup/stag-backend/09c2d5749ce2236d",
          "type": "forward"
        }
      ],
      "id": "arn:aws:elasticloadbalancing:us-west-2:012345678901:listener/app/stag-backend/7853d663b8460cb8/9c40e9e8b194d9d6",
      "load_balancer_arn": "arn:aws:elasticloadbalancing:us-west-2:012345678901:loadbalancer/app/stag-backend/7853d663b8460cb8",
      "port": 443,
      "protocol": "HTTPS",
      "ssl_policy": "ELBSecurityPolicy-FS-1-2-Res-2020-10",
      "timeouts": null
    }
  },
  {
    "type": "aws_lb_target_group",
    "name": "backend",
    "attributes": {
      "arn": "arn:aws:elasticloadbalancing:us-west-2:012345678901:targetgroup/stag-backend/09c2d5749ce2236d",
      "arn_suffix": "targetgroup/stag-backend/09c2d5749ce2236d",
      "deregistration_delay": 300,
      "health_check": [
        {
          "enabled": true,
          "healthy_threshold": 3,
          "interval": 30,
          "matcher": "200,204",
          "path": "/api/albhealthcheck",
          "port": "traffic-port",
          "protocol": "HTTP",
          "timeout": 5,
          "unhealthy_threshold": 3
        }
      ],
      "id": "arn:aws:elasticloadbalancing:us-west-2:012345678901:targetgroup/stag-backend/09c2d5749ce2236d",
      "lambda_multi_value_headers_enabled": false,
      "load_balancing_algorithm_type": "round_robin",
      "name": "stag-backend",
      "name_prefix": null,
      "port": 777,
      "protocol": "HTTP",
      "protocol_version": "HTTP1",
      "proxy_protocol_v2": false,
      "slow_start": 0,
      "stickiness": [
        {
          "cookie_duration": 86400,
          "enabled": false,
          "type": "lb_cookie"
        }
      ],
      "tags": {},
      "target_type": "instance",
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_s3_bucket",
    "name": "states",
    "attributes": {
      "acceleration_status": "",
      "acl": "private",
      "arn": "arn:aws:s3:::stag-infralight-states",
      "bucket": "stag-infralight-states",
      "bucket_domain_name": "stag-infralight-states.s3.amazonaws.com",
      "bucket_prefix": null,
      "bucket_regional_domain_name": "stag-infralight-states.s3.us-west-2.amazonaws.com",
      "cors_rule": [],
      "force_destroy": false,
      "grant": [],
      "hosted_zone_id": "Z3BJ6K6RIION7M",
      "id": "stag-infralight-states",
      "lifecycle_rule": [],
      "logging": [],
      "object_lock_configuration": [],
      "policy": null,
      "region": "us-west-2",
      "replication_configuration": [],
      "request_payer": "BucketOwner",
      "server_side_encryption_configuration": [],
      "tags": {
        "env": "stag"
      },
      "versioning": [
        {
          "enabled": false,
          "mfa_delete": false
        }
      ],
      "website": [],
      "website_domain": null,
      "website_endpoint": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "backend",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0b7da4b27b0d9caf0",
      "description": "stag backend securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0b7da4b27b0d9caf0",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "HTTP",
          "from_port": 777,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "tcp",
          "security_groups": [],
          "self": false,
          "to_port": 777
        },
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "SSH",
          "from_port": 22,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "tcp",
          "security_groups": [],
          "self": false,
          "to_port": 22
        },
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "SSL",
          "from_port": 443,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "tcp",
          "security_groups": [],
          "self": false,
          "to_port": 443
        }
      ],
      "name": "stag-backend",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-backend-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_ami",
    "name": "ubuntu",
    "attributes": {
      "architecture": "x86_64",
      "arn": "arn:aws:ec2:us-west-2::image/ami-07e573cdaa16d4e61",
      "block_device_mappings": [
        {
          "device_name": "/dev/sda1",
          "ebs": {
            "delete_on_termination": "true",
            "encrypted": "false",
            "iops": "0",
            "snapshot_id": "snap-00adfa1d1e67f8dd0",
            "throughput": "0",
            "volume_size": "8",
            "volume_type": "gp2"
          },
          "no_device": "",
          "virtual_name": ""
        },
        {
          "device_name": "/dev/sdb",
          "ebs": {},
          "no_device": "",
          "virtual_name": "ephemeral0"
        },
        {
          "device_name": "/dev/sdc",
          "ebs": {},
          "no_device": "",
          "virtual_name": "ephemeral1"
        }
      ],
      "creation_date": "2021-03-16T00:50:47.000Z",
      "description": "Canonical, Ubuntu, 20.04 LTS, amd64 focal image build on 2021-03-15",
      "ena_support": true,
      "executable_users": null,
      "filter": [
        {
          "name": "name",
          "values": [
            "ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*"
          ]
        },
        {
          "name": "virtualization-type",
          "values": [
            "hvm"
          ]
        }
      ],
      "hypervisor": "xen",
      "id": "ami-07e573cdaa16d4e61",
      "image_id": "ami-07e573cdaa16d4e61",
      "image_location": "099720109477/ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-20210315",
      "image_owner_alias": null,
      "image_type": "machine",
      "kernel_id": null,
      "most_recent": true,
      "name": "ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-20210315",
      "name_regex": null,
      "owner_id": "099720109477",
      "owners": [
        "099720109477"
      ],
      "platform": null,
      "platform_details": "Linux/UNIX",
      "product_codes": [],
      "public": true,
      "ramdisk_id": null,
      "root_device_name": "/dev/sda1",
      "root_device_type": "ebs",
      "root_snapshot_id": "snap-00adfa1d1e67f8dd0",
      "sriov_net_support": "simple",
      "state": "available",
      "state_reason": {
        "code": "UNSET",
        "message": "UNSET"
      },
      "tags": {},
      "usage_operation": "RunInstances",
      "virtualization_type": "hvm"
    }
  },
  {
    "type": "aws_iam_instance_profile",
    "name": "temp",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:instance-profile/stag-cicd-temp",
      "create_date": "2020-12-07T15:02:33Z",
      "id": "stag-cicd-temp",
      "name": "stag-cicd-temp",
      "name_prefix": null,
      "path": "/",
      "role": "stag_cicd-temp_role",
      "unique_id": "AIPARMDQF5IDMKFTQURXF"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "temp",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag_cicd-temp_role",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-12-07T15:02:31Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag_cicd-temp_role",
      "inline_policy": [
        {
          "name": "stag_cicd-temp_policy",
          "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\",\n        \"lambda:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n"
        }
      ],
      "managed_policy_arns": [],
      "max_session_duration": 3600,
      "name": "stag_cicd-temp_role",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {
        "env": "stag",
        "name": "cicd-temp"
      },
      "unique_id": "AROARMDQF5IDHCZCLWBLR"
    }
  },
  {
    "type": "aws_iam_role_policy",
    "name": "temp",
    "attributes": {
      "id": "stag_cicd-temp_role:stag_cicd-temp_policy",
      "name": "stag_cicd-temp_policy",
      "name_prefix": null,
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\",\n        \"lambda:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n",
      "role": "stag_cicd-temp_role"
    }
  },
  {
    "type": "aws_instance",
    "name": "temp",
    "attributes": {
      "ami": "ami-07e573cdaa16d4e61",
      "arn": "arn:aws:ec2:us-west-2:012345678901:instance/i-089e508ddd8f11bfd",
      "associate_public_ip_address": true,
      "availability_zone": "us-west-2a",
      "cpu_core_count": 1,
      "cpu_threads_per_core": 1,
      "credit_specification": [
        {
          "cpu_credits": "standard"
        }
      ],
      "disable_api_termination": false,
      "ebs_block_device": [],
      "ebs_optimized": false,
      "enclave_options": [
        {
          "enabled": false
        }
      ],
      "ephemeral_block_device": [],
      "get_password_data": false,
      "hibernation": false,
      "host_id": null,
      "iam_instance_profile": "stag-cicd-temp",
      "id": "i-089e508ddd8f11bfd",
      "instance_initiated_shutdown_behavior": null,
      "instance_state": "running",
      "instance_type": "t2.micro",
      "ipv6_address_count": 0,
      "ipv6_addresses": [],
      "key_name": "stag",
      "metadata_options": [
        {
          "http_endpoint": "enabled",
          "http_put_response_hop_limit": 1,
          "http_tokens": "optional"
        }
      ],
      "monitoring": false,
      "network_interface": [],
      "outpost_arn": "",
      "password_data": "",
      "placement_group": "",
      "primary_network_interface_id": "eni-018499f9c32501aff",
      "private_dns": "ip-10-1-0-137.us-west-2.compute.internal",
      "private_ip": "10.1.0.137",
      "public_dns": "ec2-35-165-201-124.us-west-2.compute.amazonaws.com",
      "public_ip": "35.165.201.124",
      "root_block_device": [
        {
          "delete_on_termination": true,
          "device_name": "/dev/sda1",
          "encrypted": false,
          "iops": 100,
          "kms_key_id": "",
          "tags": {},
          "throughput": 0,
          "volume_id": "vol-036139fc2cecb07ee",
          "volume_size": 8,
          "volume_type": "gp2"
        }
      ],
      "secondary_private_ips": [],
      "security_groups": [
        "sg-037fe9dd35db0ab43"
      ],
      "source_dest_check": true,
      "subnet_id": "subnet-093a001e537625da2",
      "tags": {
        "Name": "stag cicd-temp"
      },
      "tenancy": "default",
      "timeouts": null,
      "user_data": "3b15b3efa4e9269b51736e0b2b4e148ab560d8a5",
      "user_data_base64": null,
      "volume_tags": null,
      "vpc_security_group_ids": [
        "sg-037fe9dd35db0ab43"
      ]
    }
  },
  {
    "type": "aws_s3_bucket",
    "name": "artifacts",
    "attributes": {
      "acceleration_status": "",
      "acl": "private",
      "arn": "arn:aws:s3:::stag-infralight-artifacts",
      "bucket": "stag-infralight-artifacts",
      "bucket_domain_name": "stag-infralight-artifacts.s3.amazonaws.com",
      "bucket_prefix": null,
      "bucket_regional_domain_name": "stag-infralight-artifacts.s3.us-west-2.amazonaws.com",
      "cors_rule": [],
      "force_destroy": false,
      "grant": [],
      "hosted_zone_id": "Z3BJ6K6RIION7M",
      "id": "stag-infralight-artifacts",
      "lifecycle_rule": [],
      "logging": [],
      "object_lock_configuration": [],
      "policy": null,
      "region": "us-west-2",
      "replication_configuration": [],
      "request_payer": "BucketOwner",
      "server_side_encryption_configuration": [],
      "tags": {
        "env": "stag"
      },
      "versioning": [
        {
          "enabled": false,
          "mfa_delete": false
        }
      ],
      "website": [],
      "website_domain": null,
      "website_endpoint": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "temp",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-037fe9dd35db0ab43",
      "description": "stag cicd-temp securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-037fe9dd35db0ab43",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "SSH",
          "from_port": 22,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "tcp",
          "security_groups": [],
          "self": false,
          "to_port": 22
        }
      ],
      "name": "stag-cicd-temp",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag cicd-temp"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-db_instance",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-db_instance",
      "is_enabled": true,
      "name": "stag-producer-db_instance",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(24/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-db_instance",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-db_instance-stag_db_instance_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-db_instance",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_db_instance_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-db_instance",
      "description": "stag consumer-db_instance policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-db_instance",
      "name": "stag-consumer-db_instance",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-db_instance\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-db_instance",
      "description": "stag producer-db_instance policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-db_instance",
      "name": "stag-producer-db_instance",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-db_instance\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-db_instance",
      "name": "stag-consumer-db_instance",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-db_instance",
      "roles": [
        "stag-consumer-db_instance"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-db_instance",
      "name": "stag-producer-db_instance",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-db_instance",
      "roles": [
        "stag-producer-db_instance"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-db_instance",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-02-06T10:27:37Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-db_instance",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-db_instance"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-db_instance",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDGZU23SWQX"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-db_instance",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-02-06T10:27:33Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-db_instance",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-db_instance"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-db_instance",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDKWUYIY5PK"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-db_instance",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-db_instance",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-db_instance",
      "id": "76537db1-21eb-4d1a-a0d2-1239f72e2f6b",
      "last_modified": "2021-02-06T10:44:22Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "76537db1-21eb-4d1a-a0d2-1239f72e2f6b"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-db_instance",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-db_instance",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-db_instance",
      "handler": "fetchers/index.rdsInstance",
      "id": "stag-consumer-db_instance",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-db_instance/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:55.948+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-db_instance:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-db_instance",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-00f506b49bd32ac89"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-db_instance",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-db_instance",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-db_instance",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-db_instance",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-db_instance/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:56.741+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-db_instance:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-db_instance",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-058376737e947aa7d"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-db_instance",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-db_instance",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-00f506b49bd32ac89",
      "description": "stag consumer-db_instance securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-00f506b49bd32ac89",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-db_instance",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-db_instance-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-058376737e947aa7d",
      "description": "stag producer-db_instance securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-058376737e947aa7d",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-db_instance",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-db_instance-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-db_instance",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-db_instance",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-db_instance",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-dynamodb_table",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-dynamodb_table",
      "is_enabled": true,
      "name": "stag-producer-dynamodb_table",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(22/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-dynamodb_table",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-dynamodb_table-stag_dynamodb_table_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-dynamodb_table",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_dynamodb_table_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-dynamodb_table",
      "description": "stag consumer-dynamodb_table policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-dynamodb_table",
      "name": "stag-consumer-dynamodb_table",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-dynamodb_table\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-dynamodb_table",
      "description": "stag producer-dynamodb_table policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-dynamodb_table",
      "name": "stag-producer-dynamodb_table",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-dynamodb_table\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-dynamodb_table",
      "name": "stag-consumer-dynamodb_table",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-dynamodb_table",
      "roles": [
        "stag-consumer-dynamodb_table"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-dynamodb_table",
      "name": "stag-producer-dynamodb_table",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-dynamodb_table",
      "roles": [
        "stag-producer-dynamodb_table"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-dynamodb_table",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-02-06T10:27:37Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-dynamodb_table",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-dynamodb_table"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-dynamodb_table",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDNNVDFDF2C"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-dynamodb_table",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-02-06T10:27:35Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-dynamodb_table",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-dynamodb_table"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-dynamodb_table",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDPIQXQXHPJ"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-dynamodb_table",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-dynamodb_table",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-dynamodb_table",
      "id": "c377490a-cfc2-4c16-b1d3-2a1a039e665d",
      "last_modified": "2021-03-15T19:19:24Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "c377490a-cfc2-4c16-b1d3-2a1a039e665d"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-dynamodb_table",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-dynamodb_table",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-dynamodb_table",
      "handler": "fetchers/index.dynamoDBTable",
      "id": "stag-consumer-dynamodb_table",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-dynamodb_table/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:34:25.142+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-dynamodb_table:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-dynamodb_table",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-097ddcdeacc85869c"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-dynamodb_table",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-dynamodb_table",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-dynamodb_table",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-dynamodb_table",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-dynamodb_table/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:34:26.005+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-dynamodb_table:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-dynamodb_table",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-04b4271827406015f"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-dynamodb_table",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-dynamodb_table",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-097ddcdeacc85869c",
      "description": "stag consumer-dynamodb_table securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-097ddcdeacc85869c",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-dynamodb_table",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-dynamodb_table-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-04b4271827406015f",
      "description": "stag producer-dynamodb_table securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-04b4271827406015f",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-dynamodb_table",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-dynamodb_table-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-dynamodb_table",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-dynamodb_table",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-dynamodb_table",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-ebs_volume",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-ebs_volume",
      "is_enabled": true,
      "name": "stag-producer-ebs_volume",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(23/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-ebs_volume",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-ebs_volume-stag_ebs_volume_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-ebs_volume",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_ebs_volume_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-ebs_volume",
      "description": "stag consumer-ebs_volume policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-ebs_volume",
      "name": "stag-consumer-ebs_volume",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-ebs_volume\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-ebs_volume",
      "description": "stag producer-ebs_volume policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-ebs_volume",
      "name": "stag-producer-ebs_volume",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-ebs_volume\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-ebs_volume",
      "name": "stag-consumer-ebs_volume",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-ebs_volume",
      "roles": [
        "stag-consumer-ebs_volume"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-ebs_volume",
      "name": "stag-producer-ebs_volume",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-ebs_volume",
      "roles": [
        "stag-producer-ebs_volume"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-ebs_volume",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-02-06T10:27:41Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-ebs_volume",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-ebs_volume"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-ebs_volume",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDM363WAOOW"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-ebs_volume",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-02-06T10:27:35Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-ebs_volume",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-ebs_volume"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-ebs_volume",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDFDPWOBNTE"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-ebs_volume",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-ebs_volume",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-ebs_volume",
      "id": "ff57f68e-941c-4e28-9e06-e587c4d80ccc",
      "last_modified": "2021-02-06T10:54:07Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "ff57f68e-941c-4e28-9e06-e587c4d80ccc"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-ebs_volume",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-ebs_volume",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-ebs_volume",
      "handler": "fetchers/index.ebsVolume",
      "id": "stag-consumer-ebs_volume",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-ebs_volume/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:04.499+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-ebs_volume:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-ebs_volume",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0247b467205beab47"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-ebs_volume",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-ebs_volume",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-ebs_volume",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-ebs_volume",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-ebs_volume/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:04.390+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-ebs_volume:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-ebs_volume",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0a10258f9b8d004a4"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-ebs_volume",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-ebs_volume",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0247b467205beab47",
      "description": "stag consumer-ebs_volume securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0247b467205beab47",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-ebs_volume",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-ebs_volume-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0a10258f9b8d004a4",
      "description": "stag producer-ebs_volume securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0a10258f9b8d004a4",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-ebs_volume",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-ebs_volume-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-ebs_volume",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-ebs_volume",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-ebs_volume",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-eks_cluster",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-eks_cluster",
      "is_enabled": true,
      "name": "stag-producer-eks_cluster",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(9/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-eks_cluster",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-eks_cluster-stag_eks_cluster_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-eks_cluster",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_eks_cluster_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-eks_cluster",
      "description": "stag consumer-eks_cluster policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-eks_cluster",
      "name": "stag-consumer-eks_cluster",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-eks_cluster\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-eks_cluster",
      "description": "stag producer-eks_cluster policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-eks_cluster",
      "name": "stag-producer-eks_cluster",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-eks_cluster\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-eks_cluster",
      "name": "stag-consumer-eks_cluster",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-eks_cluster",
      "roles": [
        "stag-consumer-eks_cluster"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-eks_cluster",
      "name": "stag-producer-eks_cluster",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-eks_cluster",
      "roles": [
        "stag-producer-eks_cluster"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-eks_cluster",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-11-30T11:00:11Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-eks_cluster",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-eks_cluster"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-eks_cluster",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDOBJMRQ3XD"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-eks_cluster",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-11-30T11:00:11Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-eks_cluster",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-eks_cluster"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-eks_cluster",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDPD3AZWANV"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-eks_cluster",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-eks_cluster",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-eks_cluster",
      "id": "654142a5-d41d-4c1e-a95f-d1b778e6d38a",
      "last_modified": "2021-01-08T13:34:59Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "654142a5-d41d-4c1e-a95f-d1b778e6d38a"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-eks_cluster",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-eks_cluster",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-eks_cluster",
      "handler": "fetchers/index.eksCluster",
      "id": "stag-consumer-eks_cluster",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-eks_cluster/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:16.997+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-eks_cluster:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-eks_cluster",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0533b8750c27c3260"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-eks_cluster",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-eks_cluster",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-eks_cluster",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-eks_cluster",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-eks_cluster/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:21.866+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-eks_cluster:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-eks_cluster",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-020bc21182b73b91c"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-eks_cluster",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-eks_cluster",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0533b8750c27c3260",
      "description": "stag consumer-eks_cluster securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0533b8750c27c3260",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-eks_cluster",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-eks_cluster-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-020bc21182b73b91c",
      "description": "stag producer-eks_cluster securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-020bc21182b73b91c",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-eks_cluster",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-eks_cluster-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-eks_cluster",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-eks_cluster",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-eks_cluster",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "aws_ami",
    "name": "ubuntu",
    "attributes": {
      "architecture": "x86_64",
      "arn": "arn:aws:ec2:us-west-2::image/ami-07e573cdaa16d4e61",
      "block_device_mappings": [
        {
          "device_name": "/dev/sda1",
          "ebs": {
            "delete_on_termination": "true",
            "encrypted": "false",
            "iops": "0",
            "snapshot_id": "snap-00adfa1d1e67f8dd0",
            "throughput": "0",
            "volume_size": "8",
            "volume_type": "gp2"
          },
          "no_device": "",
          "virtual_name": ""
        },
        {
          "device_name": "/dev/sdb",
          "ebs": {},
          "no_device": "",
          "virtual_name": "ephemeral0"
        },
        {
          "device_name": "/dev/sdc",
          "ebs": {},
          "no_device": "",
          "virtual_name": "ephemeral1"
        }
      ],
      "creation_date": "2021-03-16T00:50:47.000Z",
      "description": "Canonical, Ubuntu, 20.04 LTS, amd64 focal image build on 2021-03-15",
      "ena_support": true,
      "executable_users": null,
      "filter": [
        {
          "name": "name",
          "values": [
            "ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*"
          ]
        },
        {
          "name": "virtualization-type",
          "values": [
            "hvm"
          ]
        }
      ],
      "hypervisor": "xen",
      "id": "ami-07e573cdaa16d4e61",
      "image_id": "ami-07e573cdaa16d4e61",
      "image_location": "099720109477/ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-20210315",
      "image_owner_alias": null,
      "image_type": "machine",
      "kernel_id": null,
      "most_recent": true,
      "name": "ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-20210315",
      "name_regex": null,
      "owner_id": "099720109477",
      "owners": [
        "099720109477"
      ],
      "platform": null,
      "platform_details": "Linux/UNIX",
      "product_codes": [],
      "public": true,
      "ramdisk_id": null,
      "root_device_name": "/dev/sda1",
      "root_device_type": "ebs",
      "root_snapshot_id": "snap-00adfa1d1e67f8dd0",
      "sriov_net_support": "simple",
      "state": "available",
      "state_reason": {
        "code": "UNSET",
        "message": "UNSET"
      },
      "tags": {},
      "usage_operation": "RunInstances",
      "virtualization_type": "hvm"
    }
  },
  {
    "type": "aws_autoscaling_attachment",
    "name": "frontend",
    "attributes": {
      "alb_target_group_arn": "arn:aws:elasticloadbalancing:us-west-2:012345678901:targetgroup/stag-frontend/3241c4bb9ecf417e",
      "autoscaling_group_name": "stag-frontend",
      "elb": null,
      "id": "stag-frontend-20210108133430181900000001"
    }
  },
  {
    "type": "aws_autoscaling_group",
    "name": "frontend",
    "attributes": {
      "arn": "arn:aws:autoscaling:us-west-2:012345678901:autoScalingGroup:2228f730-7c12-485c-95c3-fbc39af88efa:autoScalingGroupName/stag-frontend",
      "availability_zones": [
        "us-west-2a",
        "us-west-2b"
      ],
      "capacity_rebalance": false,
      "default_cooldown": 300,
      "desired_capacity": 1,
      "enabled_metrics": [],
      "force_delete": true,
      "health_check_grace_period": 300,
      "health_check_type": "EC2",
      "id": "stag-frontend",
      "initial_lifecycle_hook": [],
      "instance_refresh": [],
      "launch_configuration": "stag-frontend",
      "launch_template": [],
      "load_balancers": [],
      "max_instance_lifetime": 0,
      "max_size": 1,
      "metrics_granularity": "1Minute",
      "min_elb_capacity": null,
      "min_size": 1,
      "mixed_instances_policy": [],
      "name": "stag-frontend",
      "name_prefix": null,
      "placement_group": "",
      "protect_from_scale_in": false,
      "service_linked_role_arn": "arn:aws:iam::012345678901:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling",
      "suspended_processes": [],
      "tag": [
        {
          "key": "Name",
          "propagate_at_launch": true,
          "value": "stag frontend"
        }
      ],
      "tags": null,
      "target_group_arns": [
        "arn:aws:elasticloadbalancing:us-west-2:012345678901:targetgroup/stag-frontend/3241c4bb9ecf417e"
      ],
      "termination_policies": [
        "OldestInstance"
      ],
      "timeouts": {
        "delete": "1m"
      },
      "vpc_zone_identifier": [
        "subnet-08b3dc579159a77f9",
        "subnet-093a001e537625da2"
      ],
      "wait_for_capacity_timeout": "10m",
      "wait_for_elb_capacity": null
    }
  },
  {
    "type": "aws_iam_instance_profile",
    "name": "frontend",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:instance-profile/stag-frontend",
      "create_date": "2020-12-07T13:53:14Z",
      "id": "stag-frontend",
      "name": "stag-frontend",
      "name_prefix": null,
      "path": "/",
      "role": "stag_frontend_role",
      "unique_id": "AIPARMDQF5IDECDZB2SNL"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "frontend",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag_frontend_role",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-12-07T08:57:02Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag_frontend_role",
      "inline_policy": [
        {
          "name": "stag_frontend_policy",
          "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n        \"Sid\": \"VisualEditor0\",\n        \"Effect\": \"Allow\",\n        \"Action\": \"sts:AssumeRole\",\n        \"Resource\": \"*\"\n    }\n  ]\n}\n"
        }
      ],
      "managed_policy_arns": [],
      "max_session_duration": 3600,
      "name": "stag_frontend_role",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {
        "tag-key": "tag-value"
      },
      "unique_id": "AROARMDQF5IDLPLROYEZP"
    }
  },
  {
    "type": "aws_iam_role_policy",
    "name": "frontend",
    "attributes": {
      "id": "stag_frontend_role:stag_frontend_policy",
      "name": "stag_frontend_policy",
      "name_prefix": null,
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n        \"Sid\": \"VisualEditor0\",\n        \"Effect\": \"Allow\",\n        \"Action\": \"sts:AssumeRole\",\n        \"Resource\": \"*\"\n    }\n  ]\n}\n",
      "role": "stag_frontend_role"
    }
  },
  {
    "type": "aws_launch_configuration",
    "name": "frontend",
    "attributes": {
      "arn": "arn:aws:autoscaling:us-west-2:012345678901:launchConfiguration:eb93ff3b-c5a9-4c78-a9f9-22bf3ff161e2:launchConfigurationName/stag-frontend",
      "associate_public_ip_address": true,
      "ebs_block_device": [],
      "ebs_optimized": false,
      "enable_monitoring": false,
      "ephemeral_block_device": [],
      "iam_instance_profile": "arn:aws:iam::012345678901:instance-profile/stag-frontend",
      "id": "stag-frontend",
      "image_id": "ami-089668cd321f3cf82",
      "instance_type": "t2.micro",
      "key_name": "stag",
      "metadata_options": [],
      "name": "stag-frontend",
      "name_prefix": null,
      "placement_tenancy": null,
      "root_block_device": [],
      "security_groups": [
        "sg-0f477f4200bc3b95f"
      ],
      "spot_price": "",
      "user_data": "a9197faa7d1074c4c910fe730379a4d16f38f003",
      "user_data_base64": null,
      "vpc_classic_link_id": "",
      "vpc_classic_link_security_groups": []
    }
  },
  {
    "type": "aws_lb",
    "name": "frontend",
    "attributes": {
      "access_logs": [
        {
          "bucket": "",
          "enabled": false,
          "prefix": ""
        }
      ],
      "arn": "arn:aws:elasticloadbalancing:us-west-2:012345678901:loadbalancer/app/stag-frontend/278c72e69c80a068",
      "arn_suffix": "app/stag-frontend/278c72e69c80a068",
      "customer_owned_ipv4_pool": "",
      "dns_name": "stag-frontend-415067725.us-west-2.elb.amazonaws.com",
      "drop_invalid_header_fields": false,
      "enable_cross_zone_load_balancing": null,
      "enable_deletion_protection": true,
      "enable_http2": true,
      "id": "arn:aws:elasticloadbalancing:us-west-2:012345678901:loadbalancer/app/stag-frontend/278c72e69c80a068",
      "idle_timeout": 60,
      "internal": false,
      "ip_address_type": "ipv4",
      "load_balancer_type": "application",
      "name": "stag-frontend",
      "name_prefix": null,
      "security_groups": [
        "sg-0f477f4200bc3b95f"
      ],
      "subnet_mapping": [
        {
          "allocation_id": "",
          "ipv6_address": "",
          "outpost_id": "",
          "private_ipv4_address": "",
          "subnet_id": "subnet-08b3dc579159a77f9"
        },
        {
          "allocation_id": "",
          "ipv6_address": "",
          "outpost_id": "",
          "private_ipv4_address": "",
          "subnet_id": "subnet-093a001e537625da2"
        }
      ],
      "subnets": [
        "subnet-08b3dc579159a77f9",
        "subnet-093a001e537625da2"
      ],
      "tags": {
        "env": "stag"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670",
      "zone_id": "Z1H1FL5HABSF5"
    }
  },
  {
    "type": "aws_lb_listener",
    "name": "if-acm",
    "attributes": {
      "arn": "arn:aws:elasticloadbalancing:us-west-2:012345678901:listener/app/stag-frontend/278c72e69c80a068/d5230ddb11f0c4f2",
      "certificate_arn": "arn:aws:acm:us-west-2:012345678901:certificate/d67f14cd-3c7f-4b86-93f2-e99a2d52b147",
      "default_action": [
        {
          "authenticate_cognito": [],
          "authenticate_oidc": [],
          "fixed_response": [],
          "forward": [],
          "order": 1,
          "redirect": [],
          "target_group_arn": "arn:aws:elasticloadbalancing:us-west-2:012345678901:targetgroup/stag-frontend/3241c4bb9ecf417e",
          "type": "forward"
        }
      ],
      "id": "arn:aws:elasticloadbalancing:us-west-2:012345678901:listener/app/stag-frontend/278c72e69c80a068/d5230ddb11f0c4f2",
      "load_balancer_arn": "arn:aws:elasticloadbalancing:us-west-2:012345678901:loadbalancer/app/stag-frontend/278c72e69c80a068",
      "port": 443,
      "protocol": "HTTPS",
      "ssl_policy": "ELBSecurityPolicy-FS-1-2-Res-2020-10",
      "timeouts": null
    }
  },
  {
    "type": "aws_lb_target_group",
    "name": "frontend",
    "attributes": {
      "arn": "arn:aws:elasticloadbalancing:us-west-2:012345678901:targetgroup/stag-frontend/3241c4bb9ecf417e",
      "arn_suffix": "targetgroup/stag-frontend/3241c4bb9ecf417e",
      "deregistration_delay": 300,
      "health_check": [
        {
          "enabled": true,
          "healthy_threshold": 3,
          "interval": 30,
          "matcher": "200,204",
          "path": "/",
          "port": "traffic-port",
          "protocol": "HTTP",
          "timeout": 5,
          "unhealthy_threshold": 3
        }
      ],
      "id": "arn:aws:elasticloadbalancing:us-west-2:012345678901:targetgroup/stag-frontend/3241c4bb9ecf417e",
      "lambda_multi_value_headers_enabled": false,
      "load_balancing_algorithm_type": "round_robin",
      "name": "stag-frontend",
      "name_prefix": null,
      "port": 3000,
      "protocol": "HTTP",
      "protocol_version": "HTTP1",
      "proxy_protocol_v2": false,
      "slow_start": 0,
      "stickiness": [
        {
          "cookie_duration": 86400,
          "enabled": false,
          "type": "lb_cookie"
        }
      ],
      "tags": {},
      "target_type": "instance",
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "frontend",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0f477f4200bc3b95f",
      "description": "stag frontend securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0f477f4200bc3b95f",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "HTTP",
          "from_port": 3000,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "tcp",
          "security_groups": [],
          "self": false,
          "to_port": 3000
        },
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "SSH",
          "from_port": 22,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "tcp",
          "security_groups": [],
          "self": false,
          "to_port": 22
        },
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "SSL",
          "from_port": 443,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "tcp",
          "security_groups": [],
          "self": false,
          "to_port": 443
        }
      ],
      "name": "stag-frontend",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-frontend-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
      "output_base64sha256": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",
      "output_md5": "d41d8cd98f00b204e9800998ecf8427e",
      "output_path": "lambda_function.zip",
      "output_sha": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-iam_policy",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-iam_policy",
      "is_enabled": true,
      "name": "stag-producer-iam_policy",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(25/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-iam_policy",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-iam_policy-stag_iam_policy_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-iam_policy",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_iam_policy_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-iam_policy",
      "description": "stag consumer-iam_policy policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-iam_policy",
      "name": "stag-consumer-iam_policy",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-iam_policy\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-iam_policy",
      "description": "stag producer-iam_policy policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-iam_policy",
      "name": "stag-producer-iam_policy",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-iam_policy\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-iam_policy",
      "name": "stag-consumer-iam_policy",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-iam_policy",
      "roles": [
        "stag-consumer-iam_policy"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-iam_policy",
      "name": "stag-producer-iam_policy",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-iam_policy",
      "roles": [
        "stag-producer-iam_policy"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-iam_policy",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-02-18T13:09:47Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-iam_policy",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-iam_policy",
        "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-iam_policy",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDASBZYNDPH"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-iam_policy",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-02-18T13:09:47Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-iam_policy",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-iam_policy"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-iam_policy",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDC4ALT5QMX"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-iam_policy",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-iam_policy",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-iam_policy",
      "id": "751b2122-966d-45be-9e21-d403abce3812",
      "last_modified": "2021-02-18T13:16:21Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "751b2122-966d-45be-9e21-d403abce3812"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-iam_policy",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-iam_policy",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-iam_policy",
      "handler": "fetchers/index.iamPolicy",
      "id": "stag-consumer-iam_policy",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-iam_policy/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:33:40.694+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-iam_policy:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-iam_policy",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 600,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-009ca35d39f28ae53"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-iam_policy",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-iam_policy",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-iam_policy",
      "handler": "producers/regionlessProducer.handler",
      "id": "stag-producer-iam_policy",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-iam_policy/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:33:53.791+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-iam_policy:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-iam_policy",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-090d63a82bea15042"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-iam_policy",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-iam_policy",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-009ca35d39f28ae53",
      "description": "stag consumer-iam_policy securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-009ca35d39f28ae53",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-iam_policy",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-iam_policy-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-090d63a82bea15042",
      "description": "stag producer-iam_policy securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-090d63a82bea15042",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-iam_policy",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-iam_policy-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-iam_policy",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-iam_policy",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-iam_policy",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-iam_role",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-iam_role",
      "is_enabled": true,
      "name": "stag-producer-iam_role",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(3/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-iam_role",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-iam_role-stag_iam_role_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-iam_role",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_iam_role_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-iam_role",
      "description": "stag consumer-iam_role policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-iam_role",
      "name": "stag-consumer-iam_role",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-iam_role\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-iam_role",
      "description": "stag producer-iam_role policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-iam_role",
      "name": "stag-producer-iam_role",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-iam_role\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-iam_role",
      "name": "stag-consumer-iam_role",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-iam_role",
      "roles": [
        "stag-consumer-iam_role"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-iam_role",
      "name": "stag-producer-iam_role",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-iam_role",
      "roles": [
        "stag-producer-iam_role"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-iam_role",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-12-28T09:57:26Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-iam_role",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-iam_role"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-iam_role",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDCGB7ZAMRP"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-iam_role",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-12-28T09:57:26Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-iam_role",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-iam_role"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-iam_role",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDKMNUKTVHA"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-iam_role",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-iam_role",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-iam_role",
      "id": "bd9eaf7c-dbf9-43cf-91e6-e878098639a9",
      "last_modified": "2021-01-08T13:44:48Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "bd9eaf7c-dbf9-43cf-91e6-e878098639a9"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-iam_role",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-iam_role",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-iam_role",
      "handler": "fetchers/index.iamRole",
      "id": "stag-consumer-iam_role",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-iam_role/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:33:39.609+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-iam_role:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-iam_role",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0b944fb5bb25335be"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-iam_role",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-iam_role",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-iam_role",
      "handler": "producers/regionlessProducer.handler",
      "id": "stag-producer-iam_role",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-iam_role/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:33:43.281+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-iam_role:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-iam_role",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-04c83359ab9913698"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-iam_role",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-iam_role",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0b944fb5bb25335be",
      "description": "stag consumer-iam_role securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0b944fb5bb25335be",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-iam_role",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-iam_role-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-04c83359ab9913698",
      "description": "stag producer-iam_role securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-04c83359ab9913698",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-iam_role",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-iam_role-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-iam_role",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-iam_role",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-iam_role",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-iam_user",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-iam_user",
      "is_enabled": true,
      "name": "stag-producer-iam_user",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(2/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-iam_user",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-iam_user-stag_iam_user_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-iam_user",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_iam_user_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-iam_user",
      "description": "stag consumer-iam_user policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-iam_user",
      "name": "stag-consumer-iam_user",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-iam_user\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-iam_user",
      "description": "stag producer-iam_user policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-iam_user",
      "name": "stag-producer-iam_user",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-iam_user\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-iam_user",
      "name": "stag-consumer-iam_user",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-iam_user",
      "roles": [
        "stag-consumer-iam_user"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-iam_user",
      "name": "stag-producer-iam_user",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-iam_user",
      "roles": [
        "stag-producer-iam_user"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-iam_user",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-11-29T15:57:10Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-iam_user",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-iam_user"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-iam_user",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDFCS2M7YOT"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-iam_user",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-08T12:12:58Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-iam_user",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-iam_user"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-iam_user",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDDFHE5BFSX"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-iam_user",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-iam_user",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-iam_user",
      "id": "94f09c52-24c8-4b88-90e0-f1302132554c",
      "last_modified": "2021-03-15T19:19:19Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "94f09c52-24c8-4b88-90e0-f1302132554c"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-iam_user",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-iam_user",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-iam_user",
      "handler": "fetchers/index.iamUser",
      "id": "stag-consumer-iam_user",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-iam_user/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:34:35.619+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-iam_user:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-iam_user",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0721062c27538e273"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-iam_user",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-iam_user",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-iam_user",
      "handler": "producers/regionlessProducer.handler",
      "id": "stag-producer-iam_user",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-iam_user/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:34:37.138+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-iam_user:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-iam_user",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0ef258599d298bbdf"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-iam_user",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-iam_user",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0721062c27538e273",
      "description": "stag consumer-iam_user securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0721062c27538e273",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-iam_user",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-iam_user-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0ef258599d298bbdf",
      "description": "stag producer-iam_user securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0ef258599d298bbdf",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-iam_user",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-iam_user-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-iam_user",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-iam_user",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-iam_user",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "aws_eip",
    "name": "nat",
    "attributes": {
      "allocation_id": null,
      "associate_with_private_ip": null,
      "association_id": "eipassoc-05b74359a4409d5ea",
      "carrier_ip": "",
      "customer_owned_ip": "",
      "customer_owned_ipv4_pool": "",
      "domain": "vpc",
      "id": "eipalloc-05e5ad4ffaebfe67d",
      "instance": "",
      "network_border_group": "us-west-2",
      "network_interface": "eni-043ccc2ddbdd9506e",
      "private_dns": "ip-10-1-1-91.us-west-2.compute.internal",
      "private_ip": "10.1.1.91",
      "public_dns": "ec2-54-71-153-206.us-west-2.compute.amazonaws.com",
      "public_ip": "54.71.153.206",
      "public_ipv4_pool": "amazon",
      "tags": {
        "Name": "stag-nat"
      },
      "timeouts": null,
      "vpc": true
    }
  },
  {
    "type": "aws_internet_gateway",
    "name": "main",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:internet-gateway/igw-040676d70d5f1ea14",
      "id": "igw-040676d70d5f1ea14",
      "owner_id": "012345678901",
      "tags": {
        "Name": "stag-internetGateway"
      },
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_nat_gateway",
    "name": "nat",
    "attributes": {
      "allocation_id": "eipalloc-05e5ad4ffaebfe67d",
      "id": "nat-041d2515710706b46",
      "network_interface_id": "eni-043ccc2ddbdd9506e",
      "private_ip": "10.1.1.91",
      "public_ip": "54.71.153.206",
      "subnet_id": "subnet-08b3dc579159a77f9",
      "tags": {
        "Name": "stag-nat"
      }
    }
  },
  {
    "type": "aws_network_acl",
    "name": "main",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:network-acl/acl-0eef6e31a12be989e",
      "egress": [
        {
          "action": "allow",
          "cidr_block": "0.0.0.0/0",
          "from_port": 0,
          "icmp_code": 0,
          "icmp_type": 0,
          "ipv6_cidr_block": "",
          "protocol": "-1",
          "rule_no": 200,
          "to_port": 0
        }
      ],
      "id": "acl-0eef6e31a12be989e",
      "ingress": [
        {
          "action": "allow",
          "cidr_block": "0.0.0.0/0",
          "from_port": 0,
          "icmp_code": 0,
          "icmp_type": 0,
          "ipv6_cidr_block": "",
          "protocol": "-1",
          "rule_no": 100,
          "to_port": 0
        }
      ],
      "owner_id": "012345678901",
      "subnet_ids": [
        "subnet-08b3dc579159a77f9",
        "subnet-093a001e537625da2"
      ],
      "tags": {
        "Name": "stag-network-acl"
      },
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_route",
    "name": "main_mongo_nat_route",
    "attributes": {
      "destination_cidr_block": "192.168.232.0/21",
      "destination_ipv6_cidr_block": "",
      "destination_prefix_list_id": "",
      "egress_only_gateway_id": "",
      "gateway_id": "",
      "id": "r-rtb-07a2b6d59aa8ebccf1657732919",
      "instance_id": "",
      "instance_owner_id": "",
      "local_gateway_id": "",
      "nat_gateway_id": "",
      "network_interface_id": "",
      "origin": "CreateRoute",
      "route_table_id": "rtb-07a2b6d59aa8ebccf",
      "state": "active",
      "timeouts": null,
      "transit_gateway_id": "",
      "vpc_endpoint_id": null,
      "vpc_peering_connection_id": "pcx-0a9761f1944ce6142"
    }
  },
  {
    "type": "aws_route",
    "name": "main_mongo_route",
    "attributes": {
      "destination_cidr_block": "192.168.232.0/21",
      "destination_ipv6_cidr_block": "",
      "destination_prefix_list_id": "",
      "egress_only_gateway_id": "",
      "gateway_id": "",
      "id": "r-rtb-09ce55ff4840a10331657732919",
      "instance_id": "",
      "instance_owner_id": "",
      "local_gateway_id": "",
      "nat_gateway_id": "",
      "network_interface_id": "",
      "origin": "CreateRoute",
      "route_table_id": "rtb-09ce55ff4840a1033",
      "state": "active",
      "timeouts": null,
      "transit_gateway_id": "",
      "vpc_endpoint_id": null,
      "vpc_peering_connection_id": "pcx-0a9761f1944ce6142"
    }
  },
  {
    "type": "aws_route_table",
    "name": "main",
    "attributes": {
      "id": "rtb-09ce55ff4840a1033",
      "owner_id": "012345678901",
      "propagating_vgws": [
        "vgw-0756e2140782b66c4"
      ],
      "route": [
        {
          "cidr_block": "0.0.0.0/0",
          "egress_only_gateway_id": "",
          "gateway_id": "igw-040676d70d5f1ea14",
          "instance_id": "",
          "ipv6_cidr_block": "",
          "local_gateway_id": "",
          "nat_gateway_id": "",
          "network_interface_id": "",
          "transit_gateway_id": "",
          "vpc_endpoint_id": "",
          "vpc_peering_connection_id": ""
        },
        {
          "cidr_block": "192.168.232.0/21",
          "egress_only_gateway_id": "",
          "gateway_id": "",
          "instance_id": "",
          "ipv6_cidr_block": "",
          "local_gateway_id": "",
          "nat_gateway_id": "",
          "network_interface_id": "",
          "transit_gateway_id": "",
          "vpc_endpoint_id": "",
          "vpc_peering_connection_id": "pcx-0a9761f1944ce6142"
        }
      ],
      "tags": {
        "Name": "stag-routeTable"
      },
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_route_table",
    "name": "nat",
    "attributes": {
      "id": "rtb-07a2b6d59aa8ebccf",
      "owner_id": "012345678901",
      "propagating_vgws": [
        "vgw-0756e2140782b66c4"
      ],
      "route": [
        {
          "cidr_block": "0.0.0.0/0",
          "egress_only_gateway_id": "",
          "gateway_id": "",
          "instance_id": "",
          "ipv6_cidr_block": "",
          "local_gateway_id": "",
          "nat_gateway_id": "nat-041d2515710706b46",
          "network_interface_id": "",
          "transit_gateway_id": "",
          "vpc_endpoint_id": "",
          "vpc_peering_connection_id": ""
        },
        {
          "cidr_block": "192.168.232.0/21",
          "egress_only_gateway_id": "",
          "gateway_id": "",
          "instance_id": "",
          "ipv6_cidr_block": "",
          "local_gateway_id": "",
          "nat_gateway_id": "",
          "network_interface_id": "",
          "transit_gateway_id": "",
          "vpc_endpoint_id": "",
          "vpc_peering_connection_id": "pcx-0a9761f1944ce6142"
        }
      ],
      "tags": {
        "Name": "stag-nat"
      },
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_route_table_association",
    "name": "nat",
    "attributes": {
      "gateway_id": null,
      "id": "rtbassoc-09c8b3d560e4b691d",
      "route_table_id": "rtb-07a2b6d59aa8ebccf",
      "subnet_id": "subnet-05509473b4e239fcb"
    }
  },
  {
    "type": "aws_route_table_association",
    "name": "nat2",
    "attributes": {
      "gateway_id": null,
      "id": "rtbassoc-0328a95eabd64fab7",
      "route_table_id": "rtb-07a2b6d59aa8ebccf",
      "subnet_id": "subnet-0d54c2cefc954de75"
    }
  },
  {
    "type": "aws_route_table_association",
    "name": "nat_private1",
    "attributes": {
      "gateway_id": null,
      "id": "rtbassoc-02a5937a27d2159f3",
      "route_table_id": "rtb-07a2b6d59aa8ebccf",
      "subnet_id": "subnet-0f18059eb5bd25851"
    }
  },
  {
    "type": "aws_route_table_association",
    "name": "nat_private2",
    "attributes": {
      "gateway_id": null,
      "id": "rtbassoc-02ab0a04b79329c31",
      "route_table_id": "rtb-07a2b6d59aa8ebccf",
      "subnet_id": "subnet-0c3ff7b11dace5f50"
    }
  },
  {
    "type": "aws_route_table_association",
    "name": "rt_association1",
    "attributes": {
      "gateway_id": null,
      "id": "rtbassoc-054a58c0761a75a37",
      "route_table_id": "rtb-09ce55ff4840a1033",
      "subnet_id": "subnet-093a001e537625da2"
    }
  },
  {
    "type": "aws_route_table_association",
    "name": "rt_association2",
    "attributes": {
      "gateway_id": null,
      "id": "rtbassoc-0614dbf12866129ad",
      "route_table_id": "rtb-09ce55ff4840a1033",
      "subnet_id": "subnet-08b3dc579159a77f9"
    }
  },
  {
    "type": "aws_subnet",
    "name": "subnet1",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:subnet/subnet-093a001e537625da2",
      "assign_ipv6_address_on_creation": false,
      "availability_zone": "us-west-2a",
      "availability_zone_id": "usw2-az2",
      "cidr_block": "10.1.0.0/24",
      "customer_owned_ipv4_pool": "",
      "id": "subnet-093a001e537625da2",
      "ipv6_cidr_block": "",
      "ipv6_cidr_block_association_id": "",
      "map_customer_owned_ip_on_launch": false,
      "map_public_ip_on_launch": true,
      "outpost_arn": "",
      "owner_id": "012345678901",
      "tags": {
        "Name": "stag-public1"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_subnet",
    "name": "subnet2",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:subnet/subnet-08b3dc579159a77f9",
      "assign_ipv6_address_on_creation": false,
      "availability_zone": "us-west-2b",
      "availability_zone_id": "usw2-az1",
      "cidr_block": "10.1.1.0/24",
      "customer_owned_ipv4_pool": "",
      "id": "subnet-08b3dc579159a77f9",
      "ipv6_cidr_block": "",
      "ipv6_cidr_block_association_id": "",
      "map_customer_owned_ip_on_launch": false,
      "map_public_ip_on_launch": true,
      "outpost_arn": "",
      "owner_id": "012345678901",
      "tags": {
        "Name": "stag-public2"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_subnet",
    "name": "subnet3",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:subnet/subnet-05509473b4e239fcb",
      "assign_ipv6_address_on_creation": false,
      "availability_zone": "us-west-2d",
      "availability_zone_id": "usw2-az4",
      "cidr_block": "10.1.3.0/24",
      "customer_owned_ipv4_pool": "",
      "id": "subnet-05509473b4e239fcb",
      "ipv6_cidr_block": "",
      "ipv6_cidr_block_association_id": "",
      "map_customer_owned_ip_on_launch": false,
      "map_public_ip_on_launch": true,
      "outpost_arn": "",
      "owner_id": "012345678901",
      "tags": {
        "Name": "stag-lambda1"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_subnet",
    "name": "subnet4",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:subnet/subnet-0d54c2cefc954de75",
      "assign_ipv6_address_on_creation": false,
      "availability_zone": "us-west-2c",
      "availability_zone_id": "usw2-az3",
      "cidr_block": "10.1.4.0/24",
      "customer_owned_ipv4_pool": "",
      "id": "subnet-0d54c2cefc954de75",
      "ipv6_cidr_block": "",
      "ipv6_cidr_block_association_id": "",
      "map_customer_owned_ip_on_launch": false,
      "map_public_ip_on_launch": true,
      "outpost_arn": "",
      "owner_id": "012345678901",
      "tags": {
        "Name": "stag-lambda2"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_subnet",
    "name": "subnet_private1",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:subnet/subnet-0f18059eb5bd25851",
      "assign_ipv6_address_on_creation": false,
      "availability_zone": "us-west-2a",
      "availability_zone_id": "usw2-az2",
      "cidr_block": "10.1.5.0/24",
      "customer_owned_ipv4_pool": "",
      "id": "subnet-0f18059eb5bd25851",
      "ipv6_cidr_block": "",
      "ipv6_cidr_block_association_id": "",
      "map_customer_owned_ip_on_launch": false,
      "map_public_ip_on_launch": true,
      "outpost_arn": "",
      "owner_id": "012345678901",
      "tags": {
        "Name": "stag-private1"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_subnet",
    "name": "subnet_private2",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:subnet/subnet-0c3ff7b11dace5f50",
      "assign_ipv6_address_on_creation": false,
      "availability_zone": "us-west-2b",
      "availability_zone_id": "usw2-az1",
      "cidr_block": "10.1.6.0/24",
      "customer_owned_ipv4_pool": "",
      "id": "subnet-0c3ff7b11dace5f50",
      "ipv6_cidr_block": "",
      "ipv6_cidr_block_association_id": "",
      "map_customer_owned_ip_on_launch": false,
      "map_public_ip_on_launch": true,
      "outpost_arn": "",
      "owner_id": "012345678901",
      "tags": {
        "Name": "stag-private2"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_vpc",
    "name": "main",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:vpc/vpc-06af93201036c0670",
      "assign_generated_ipv6_cidr_block": false,
      "cidr_block": "10.1.0.0/16",
      "default_network_acl_id": "acl-02989014d7d061e07",
      "default_route_table_id": "rtb-07a2b6d59aa8ebccf",
      "default_security_group_id": "sg-0d4d7c20f4f7ca686",
      "dhcp_options_id": "dopt-3a6c1c42",
      "enable_classiclink": false,
      "enable_classiclink_dns_support": false,
      "enable_dns_hostnames": true,
      "enable_dns_support": true,
      "id": "vpc-06af93201036c0670",
      "instance_tenancy": "default",
      "ipv6_association_id": "",
      "ipv6_cidr_block": "",
      "main_route_table_id": "rtb-07a2b6d59aa8ebccf",
      "owner_id": "012345678901",
      "tags": {
        "Name": "stag-vpc"
      }
    }
  },
  {
    "type": "aws_vpn_gateway",
    "name": "main",
    "attributes": {
      "amazon_side_asn": "64512",
      "arn": "arn:aws:ec2:us-west-2:012345678901:vpn-gateway/vgw-0756e2140782b66c4",
      "availability_zone": null,
      "id": "vgw-0756e2140782b66c4",
      "tags": {
        "Name": "stag-vpn-gateway"
      },
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_vpn_gateway_attachment",
    "name": "vpn_attachment",
    "attributes": {
      "id": "vpn-attachment-ff7cda99",
      "vpc_id": "vpc-06af93201036c0670",
      "vpn_gateway_id": "vgw-0756e2140782b66c4"
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-instance",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-instance",
      "is_enabled": true,
      "name": "stag-producer-instance",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(10/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-instance",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-instance-stag_instance_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-instance",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_instance_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-instance",
      "description": "stag consumer-instance policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-instance",
      "name": "stag-consumer-instance",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-instance\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-instance",
      "description": "stag producer-instance policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-instance",
      "name": "stag-producer-instance",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-instance\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-instance",
      "name": "stag-consumer-instance",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-instance",
      "roles": [
        "stag-consumer-instance"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-instance",
      "name": "stag-producer-instance",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-instance",
      "roles": [
        "stag-producer-instance"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-instance",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-08T12:13:00Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-instance",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-instance"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-instance",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDAA2XNPTO2"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-instance",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-12-16T17:48:53Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-instance",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-instance"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-instance",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDJSLW2GE47"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-instance",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-instance",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-instance",
      "id": "f5e9c01e-d462-443b-9d7b-ee0ed20e0d5e",
      "last_modified": "2021-01-08T14:15:16Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "f5e9c01e-d462-443b-9d7b-ee0ed20e0d5e"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-instance",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-instance",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-instance",
      "handler": "fetchers/index.instance",
      "id": "stag-consumer-instance",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-instance/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:04.895+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-instance:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-instance",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-061e8b80aec9f3e37"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-instance",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-instance",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-instance",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-instance",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-instance/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:04.361+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-instance:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-instance",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-03743dcc9d1ba9a67"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-instance",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-instance",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-061e8b80aec9f3e37",
      "description": "stag consumer-instance securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-061e8b80aec9f3e37",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-instance",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-instance-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-03743dcc9d1ba9a67",
      "description": "stag producer-instance securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-03743dcc9d1ba9a67",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-instance",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-instance-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-instance",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-instance",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-instance",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-igw",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-igw",
      "is_enabled": true,
      "name": "stag-producer-igw",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(1/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-igw",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-igw-stag_igw_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-igw",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_igw_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-igw",
      "description": "stag consumer-igw policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-igw",
      "name": "stag-consumer-igw",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-igw\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-igw",
      "description": "stag producer-igw policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-igw",
      "name": "stag-producer-igw",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-igw\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-igw",
      "name": "stag-consumer-igw",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-igw",
      "roles": [
        "stag-consumer-igw"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-igw",
      "name": "stag-producer-igw",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-igw",
      "roles": [
        "stag-producer-igw"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-igw",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-11-28T22:47:36Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-igw",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-igw"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-igw",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDHCIDBCRY4"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-igw",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-11-28T22:47:36Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-igw",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-igw"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-igw",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDICWI2KZ4I"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-igw",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-igw",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-igw",
      "id": "3bcf4d8c-8f5d-4bc2-9e67-dd2954f364c8",
      "last_modified": "2021-01-08T13:44:33Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "3bcf4d8c-8f5d-4bc2-9e67-dd2954f364c8"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-igw",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-igw",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-igw",
      "handler": "fetchers/index.internetGateway",
      "id": "stag-consumer-igw",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-igw/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:31.903+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-igw:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-igw",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0340856d074ee4316"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-igw",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-igw",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-igw",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-igw",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-igw/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:35.535+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-igw:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-igw",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0ff5ec2e1559030ba"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-igw",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-igw",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0340856d074ee4316",
      "description": "stag consumer-igw securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0340856d074ee4316",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-igw",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-igw-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0ff5ec2e1559030ba",
      "description": "stag producer-igw securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0ff5ec2e1559030ba",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-igw",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-igw-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-igw",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-igw",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-igw",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-lambda_function",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-lambda_function",
      "is_enabled": true,
      "name": "stag-producer-lambda_function",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(11/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-lambda_function",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-lambda_function-stag_lambda_function_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-lambda_function",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_lambda_function_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-lambda_function",
      "description": "stag consumer-lambda_function policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-lambda_function",
      "name": "stag-consumer-lambda_function",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-lambda_function\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-lambda_function",
      "description": "stag producer-lambda_function policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-lambda_function",
      "name": "stag-producer-lambda_function",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-lambda_function\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-lambda_function",
      "name": "stag-consumer-lambda_function",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-lambda_function",
      "roles": [
        "stag-consumer-lambda_function"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-lambda_function",
      "name": "stag-producer-lambda_function",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-lambda_function",
      "roles": [
        "stag-producer-lambda_function"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-lambda_function",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-12-28T09:57:26Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-lambda_function",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-lambda_function"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-lambda_function",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDLPPUEU7TB"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-lambda_function",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-12-28T09:57:26Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-lambda_function",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-lambda_function"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-lambda_function",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDGZWCFVT64"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-lambda_function",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-lambda_function",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-lambda_function",
      "id": "ec3d66ce-75ac-4738-91ca-0c129539d4fc",
      "last_modified": "2021-01-08T13:34:51Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "ec3d66ce-75ac-4738-91ca-0c129539d4fc"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-lambda_function",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-lambda_function",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-lambda_function",
      "handler": "fetchers/index.lambdaFunction",
      "id": "stag-consumer-lambda_function",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-lambda_function/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:31:29.436+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-lambda_function:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-lambda_function",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-05e94dc7a1465436e"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-lambda_function",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-lambda_function",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-lambda_function",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-lambda_function",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-lambda_function/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:31:30.219+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-lambda_function:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-lambda_function",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0ee65477928f65102"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-lambda_function",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-lambda_function",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-05e94dc7a1465436e",
      "description": "stag consumer-lambda_function securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-05e94dc7a1465436e",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-lambda_function",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-lambda_function-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0ee65477928f65102",
      "description": "stag producer-lambda_function securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0ee65477928f65102",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-lambda_function",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-lambda_function-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-lambda_function",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-lambda_function",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-lambda_function",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-launch_configuration",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-launch_configuration",
      "is_enabled": true,
      "name": "stag-producer-launch_configuration",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(20/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-launch_configuration",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-launch_configuration-stag_launch_configuration_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-launch_configuration",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_launch_configuration_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-launch_configuration",
      "description": "stag consumer-launch_configuration policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-launch_configuration",
      "name": "stag-consumer-launch_configuration",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-launch_configuration\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-launch_configuration",
      "description": "stag producer-launch_configuration policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-launch_configuration",
      "name": "stag-producer-launch_configuration",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-launch_configuration\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-launch_configuration",
      "name": "stag-consumer-launch_configuration",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-launch_configuration",
      "roles": [
        "stag-consumer-launch_configuration"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-launch_configuration",
      "name": "stag-producer-launch_configuration",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-launch_configuration",
      "roles": [
        "stag-producer-launch_configuration"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-launch_configuration",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-28T12:38:45Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-launch_configuration",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-launch_configuration"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-launch_configuration",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDOP5P4J3JW"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-launch_configuration",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-28T12:38:47Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-launch_configuration",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-launch_configuration"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-launch_configuration",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDHQCP2ORX5"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-launch_configuration",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-launch_configuration",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-launch_configuration",
      "id": "fb4ef23c-ad0c-4ca7-80bf-2c658c842bff",
      "last_modified": "2021-01-28T12:42:24Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "fb4ef23c-ad0c-4ca7-80bf-2c658c842bff"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-launch_configuration",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-launch_configuration",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-launch_configuration",
      "handler": "fetchers/index.launchConfiguration",
      "id": "stag-consumer-launch_configuration",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-launch_configuration/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:16.591+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-launch_configuration:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-launch_configuration",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0cb284646b06027c4"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-launch_configuration",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-launch_configuration",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-launch_configuration",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-launch_configuration",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-launch_configuration/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:31:29.824+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-launch_configuration:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-launch_configuration",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-05eb2c316e22afd2d"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-launch_configuration",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-launch_configuration",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0cb284646b06027c4",
      "description": "stag consumer-launch_configuration securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0cb284646b06027c4",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-launch_configuration",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-launch_configuration-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-05eb2c316e22afd2d",
      "description": "stag producer-launch_configuration securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-05eb2c316e22afd2d",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-launch_configuration",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-launch_configuration-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-launch_configuration",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-launch_configuration",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-launch_configuration",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
      "output_base64sha256": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",
      "output_md5": "d41d8cd98f00b204e9800998ecf8427e",
      "output_path": "lambda_function.zip",
      "output_sha": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-load_balancer",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-load_balancer",
      "is_enabled": true,
      "name": "stag-producer-load_balancer",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(17/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-load_balancer",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-load_balancer-stag_load_balancer_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-load_balancer",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_load_balancer_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-load_balancer",
      "description": "stag consumer-load_balancer policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-load_balancer",
      "name": "stag-consumer-load_balancer",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-load_balancer\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-load_balancer",
      "description": "stag producer-load_balancer policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-load_balancer",
      "name": "stag-producer-load_balancer",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-load_balancer\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-load_balancer",
      "name": "stag-consumer-load_balancer",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-load_balancer",
      "roles": [
        "stag-consumer-load_balancer"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-load_balancer",
      "name": "stag-producer-load_balancer",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-load_balancer",
      "roles": [
        "stag-producer-load_balancer"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-load_balancer",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-28T12:38:45Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-load_balancer",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-load_balancer"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-load_balancer",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDD5TVUBLBY"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-load_balancer",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-28T12:38:45Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-load_balancer",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-load_balancer"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-load_balancer",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDIHIAMNDCN"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-load_balancer",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-load_balancer",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-load_balancer",
      "id": "66fa9ae8-1f46-4862-953e-85eab8d16ba0",
      "last_modified": "2021-01-28T13:01:42Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "66fa9ae8-1f46-4862-953e-85eab8d16ba0"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-load_balancer",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-load_balancer",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-load_balancer",
      "handler": "fetchers/index.loadBalancer",
      "id": "stag-consumer-load_balancer",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-load_balancer/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:40.513+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-load_balancer:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-load_balancer",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0789d916421a1f645"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-load_balancer",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-load_balancer",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-load_balancer",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-load_balancer",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-load_balancer/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:47.797+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-load_balancer:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-load_balancer",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0ec3dc979e4a559f4"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-load_balancer",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-load_balancer",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0789d916421a1f645",
      "description": "stag consumer-load_balancer securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0789d916421a1f645",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-load_balancer",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-load_balancer-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0ec3dc979e4a559f4",
      "description": "stag producer-load_balancer securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0ec3dc979e4a559f4",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-load_balancer",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-load_balancer-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-load_balancer",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-load_balancer",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-load_balancer",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-load_balancer_v2",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-load_balancer_v2",
      "is_enabled": true,
      "name": "stag-producer-load_balancer_v2",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(18/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-load_balancer_v2",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-load_balancer_v2-stag_load_balancer_v2_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-load_balancer_v2",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_load_balancer_v2_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-load_balancer_v2",
      "description": "stag consumer-load_balancer_v2 policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-load_balancer_v2",
      "name": "stag-consumer-load_balancer_v2",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-load_balancer_v2\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-load_balancer_v2",
      "description": "stag producer-load_balancer_v2 policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-load_balancer_v2",
      "name": "stag-producer-load_balancer_v2",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-load_balancer_v2\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-load_balancer_v2",
      "name": "stag-consumer-load_balancer_v2",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-load_balancer_v2",
      "roles": [
        "stag-consumer-load_balancer_v2"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-load_balancer_v2",
      "name": "stag-producer-load_balancer_v2",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-load_balancer_v2",
      "roles": [
        "stag-producer-load_balancer_v2"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-load_balancer_v2",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-28T12:38:45Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-load_balancer_v2",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-load_balancer_v2"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-load_balancer_v2",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDDM3CZL2BO"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-load_balancer_v2",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-28T12:38:45Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-load_balancer_v2",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-load_balancer_v2"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-load_balancer_v2",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDG5ZG5ZY2P"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-load_balancer_v2",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-load_balancer_v2",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-load_balancer_v2",
      "id": "a3359349-5cb9-4bb2-b977-2febc77378b5",
      "last_modified": "2021-01-28T12:45:45Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "a3359349-5cb9-4bb2-b977-2febc77378b5"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-load_balancer_v2",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-load_balancer_v2",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-load_balancer_v2",
      "handler": "fetchers/index.loadBalancerV2",
      "id": "stag-consumer-load_balancer_v2",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-load_balancer_v2/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:33:42.608+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-load_balancer_v2:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-load_balancer_v2",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0f75cc9df5214fb54"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-load_balancer_v2",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-load_balancer_v2",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-load_balancer_v2",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-load_balancer_v2",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-load_balancer_v2/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:33:44.376+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-load_balancer_v2:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-load_balancer_v2",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-03c83545cd52beacf"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-load_balancer_v2",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-load_balancer_v2",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0f75cc9df5214fb54",
      "description": "stag consumer-load_balancer_v2 securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0f75cc9df5214fb54",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-load_balancer_v2",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-load_balancer_v2-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-03c83545cd52beacf",
      "description": "stag producer-load_balancer_v2 securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-03c83545cd52beacf",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-load_balancer_v2",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-load_balancer_v2-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-load_balancer_v2",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-load_balancer_v2",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-load_balancer_v2",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "mongodbatlas_project",
    "name": "project",
    "attributes": {
      "cluster_count": 0,
      "created": "2020-12-31T13:38:20Z",
      "id": "5fedd449ba105176406ccb44",
      "name": "staging",
      "org_id": "5fbe4881480e3f73014bc445",
      "teams": []
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
      "output_base64sha256": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",
      "output_md5": "d41d8cd98f00b204e9800998ecf8427e",
      "output_path": "lambda_function.zip",
      "output_sha": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
      "output_size": 0,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-route53_zone",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-route53_zone",
      "is_enabled": true,
      "name": "stag-producer-route53_zone",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(8/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-route53_zone",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-route53_zone-stag_route53_zone_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-route53_zone",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_route53_zone_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-route53_zone",
      "description": "stag consumer-route53_zone policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-route53_zone",
      "name": "stag-consumer-route53_zone",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-route53_zone\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-route53_zone",
      "description": "stag producer-route53_zone policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-route53_zone",
      "name": "stag-producer-route53_zone",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-route53_zone\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-route53_zone",
      "name": "stag-consumer-route53_zone",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-route53_zone",
      "roles": [
        "stag-consumer-route53_zone"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-route53_zone",
      "name": "stag-producer-route53_zone",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-route53_zone",
      "roles": [
        "stag-producer-route53_zone"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-route53_zone",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-11-30T11:00:11Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-route53_zone",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-route53_zone"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-route53_zone",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDI5KW6NBGF"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-route53_zone",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-08T12:13:00Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-route53_zone",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-route53_zone"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-route53_zone",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDIENHJFO3Q"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-route53_zone",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-route53_zone",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-route53_zone",
      "id": "77bd336b-f994-4518-93cf-ececeb1e62ab",
      "last_modified": "2021-01-08T14:05:04Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "77bd336b-f994-4518-93cf-ececeb1e62ab"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-route53_zone",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-route53_zone",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-route53_zone",
      "handler": "fetchers/index.route53HostedZone",
      "id": "stag-consumer-route53_zone",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-route53_zone/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:03.356+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-route53_zone:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-route53_zone",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0c2316910ccb20a17"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-route53_zone",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-route53_zone",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-route53_zone",
      "handler": "producers/regionlessProducer.handler",
      "id": "stag-producer-route53_zone",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-route53_zone/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:02.997+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-route53_zone:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-route53_zone",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0991ace4a423198a6"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-route53_zone",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-route53_zone",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0c2316910ccb20a17",
      "description": "stag consumer-route53_zone securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0c2316910ccb20a17",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-route53_zone",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-route53_zone-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0991ace4a423198a6",
      "description": "stag producer-route53_zone securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0991ace4a423198a6",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-route53_zone",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-route53_zone-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-route53_zone",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-route53_zone",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-route53_zone",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-s3bucket",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-s3bucket",
      "is_enabled": true,
      "name": "stag-producer-s3bucket",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(0/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-s3bucket",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-s3bucket-stag_s3bucket_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-s3bucket",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_s3bucket_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-s3bucket",
      "description": "stag consumer-s3bucket policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-s3bucket",
      "name": "stag-consumer-s3bucket",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-s3bucket\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-s3bucket",
      "description": "stag producer-s3bucket policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-s3bucket",
      "name": "stag-producer-s3bucket",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-s3bucket\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-s3bucket",
      "name": "stag-consumer-s3bucket",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-s3bucket",
      "roles": [
        "stag-consumer-s3bucket"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-s3bucket",
      "name": "stag-producer-s3bucket",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-s3bucket",
      "roles": [
        "stag-producer-s3bucket"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-s3bucket",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-18T12:21:59Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-s3bucket",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-s3bucket"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-s3bucket",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDEIZPMGBSQ"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-s3bucket",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-18T12:21:59Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-s3bucket",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-s3bucket"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-s3bucket",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDHQZM5X4ZC"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-s3bucket",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-s3bucket",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-s3bucket",
      "id": "3d7eaf4b-bab3-4a0b-b631-922bf4631bdf",
      "last_modified": "2021-01-18T12:35:04Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "3d7eaf4b-bab3-4a0b-b631-922bf4631bdf"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-s3bucket",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-s3bucket",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-s3bucket",
      "handler": "fetchers/index.s3Bucket",
      "id": "stag-consumer-s3bucket",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-s3bucket/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:33:20.407+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-s3bucket:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-s3bucket",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-09bf8de189b5df718"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-s3bucket",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-s3bucket",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-s3bucket",
      "handler": "producers/regionlessProducer.handler",
      "id": "stag-producer-s3bucket",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-s3bucket/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:33:02.991+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-s3bucket:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-s3bucket",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-02cbaacad2b32dda9"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-s3bucket",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-s3bucket",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-09bf8de189b5df718",
      "description": "stag consumer-s3bucket securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-09bf8de189b5df718",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-s3bucket",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-s3bucket-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-02cbaacad2b32dda9",
      "description": "stag producer-s3bucket securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-02cbaacad2b32dda9",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-s3bucket",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-s3bucket-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-s3bucket",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-s3bucket",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-s3bucket",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-s3_state_updater",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-s3_state_updater",
      "is_enabled": true,
      "name": "stag-producer-s3_state_updater",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "rate(1 minute)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-s3_state_updater",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-s3_state_updater-stag_s3_state_updater_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-s3_state_updater",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_s3_state_updater_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-s3_state_updater",
      "description": "stag consumer-s3_state_updater policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-s3_state_updater",
      "name": "stag-consumer-s3_state_updater",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-s3_state_updater\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-s3_state_updater",
      "description": "stag producer-s3_state_updater policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-s3_state_updater",
      "name": "stag-producer-s3_state_updater",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-s3_state_updater\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-s3_state_updater",
      "name": "stag-consumer-s3_state_updater",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-s3_state_updater",
      "roles": [
        "stag-consumer-s3_state_updater"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-s3_state_updater",
      "name": "stag-producer-s3_state_updater",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-s3_state_updater",
      "roles": [
        "stag-producer-s3_state_updater"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-s3_state_updater",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-18T12:21:59Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-s3_state_updater",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-s3_state_updater"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-s3_state_updater",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDJBNGC6EEJ"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-s3_state_updater",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-18T12:21:59Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-s3_state_updater",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-s3_state_updater"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-s3_state_updater",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDNLDOXVS7I"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 1,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-s3_state_updater",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-s3_state_updater",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-s3_state_updater",
      "id": "66652247-41f9-4b51-b23f-3b5ecc42934b",
      "last_modified": "2021-01-18T13:51:28Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "66652247-41f9-4b51-b23f-3b5ecc42934b"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-s3_state_updater",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "AUTH0_AUDIENCE": "infralight-api",
            "AUTH0_CLIENT_ID": "kEjj2QkFV5D7Eny44IcuCerSJ0iCtmAk",
            "AUTH0_CLIENT_SECRET": "vkoPLyAGz4d4biAhJOMBL9qxtgq7OKIwCUQbgzXAku3TcAi-7PfgAOrIdr_Mz50F",
            "AUTH0_DOMAIN": "stagauth.infralight.cloud",
            "BACKEND_URL": "https://stagapi.infralight.cloud/api",
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-s3_state_updater",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production",
            "SECRET": "ic7vU8A82pBaOBIfzMqUy3c"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-s3_state_updater",
      "handler": "fetchers/index.s3StateUpdater",
      "id": "stag-consumer-s3_state_updater",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-s3_state_updater/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:33:39.611+0000",
      "layers": [],
      "memory_size": 2048,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-s3_state_updater:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-s3_state_updater",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "+AMVe6/HBWzn23YFlS0dz1AYJnr+vT5HYXBOJNBXD08=",
      "source_code_size": 28689348,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0d0041df7c84d010c"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-s3_state_updater",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-s3_state_updater",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-s3_state_updater",
      "handler": "producers/s3StateUpdaterProducer.handler",
      "id": "stag-producer-s3_state_updater",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-s3_state_updater/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:33:23.498+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-s3_state_updater:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-s3_state_updater",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "y2msPThQ+U0UTHuEOIMl33qOGaZFhOwqMNzyInYAemQ=",
      "source_code_size": 16332536,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0ca04943ec8242d60"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-s3_state_updater",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-s3_state_updater",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0d0041df7c84d010c",
      "description": "stag consumer-s3_state_updater securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0d0041df7c84d010c",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-s3_state_updater",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-s3_state_updater-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0ca04943ec8242d60",
      "description": "stag producer-s3_state_updater securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0ca04943ec8242d60",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-s3_state_updater",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-s3_state_updater-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-s3_state_updater",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-s3_state_updater",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-s3_state_updater",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-security_group",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-security_group",
      "is_enabled": true,
      "name": "stag-producer-security_group",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(4/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-security_group",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-security_group-stag_security_group_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-security_group",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_security_group_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-security_group",
      "description": "stag consumer-security_group policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-security_group",
      "name": "stag-consumer-security_group",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-security_group\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-security_group",
      "description": "stag producer-security_group policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-security_group",
      "name": "stag-producer-security_group",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-security_group\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-security_group",
      "name": "stag-consumer-security_group",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-security_group",
      "roles": [
        "stag-consumer-security_group"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-security_group",
      "name": "stag-producer-security_group",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-security_group",
      "roles": [
        "stag-producer-security_group"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-security_group",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-11-29T16:09:41Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-security_group",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-security_group"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-security_group",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDHOZB3JRCG"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-security_group",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-08T12:13:07Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-security_group",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-security_group"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-security_group",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDP7JTPMD4T"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-security_group",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-security_group",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-security_group",
      "id": "2c12dd46-adca-4744-803b-2e59e5caa7d5",
      "last_modified": "2021-01-08T13:34:48Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "2c12dd46-adca-4744-803b-2e59e5caa7d5"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-security_group",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-security_group",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-security_group",
      "handler": "fetchers/index.securityGroup",
      "id": "stag-consumer-security_group",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-security_group/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:33:02.368+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-security_group:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-security_group",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-041c6f8047745d8f5"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-security_group",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-security_group",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-security_group",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-security_group",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-security_group/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:33:01.133+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-security_group:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-security_group",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-01f1821be52370739"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-security_group",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-security_group",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-041c6f8047745d8f5",
      "description": "stag consumer-security_group securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-041c6f8047745d8f5",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-security_group",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-security_group-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-01f1821be52370739",
      "description": "stag producer-security_group securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-01f1821be52370739",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-security_group",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-security_group-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-security_group",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-security_group",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-security_group",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-sns_topic",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-sns_topic",
      "is_enabled": true,
      "name": "stag-producer-sns_topic",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "rate(4 hours)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-sns_topic",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-sns_topic-stag_sns_topic_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-sns_topic",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_sns_topic_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-sns_topic",
      "description": "stag consumer-sns_topic policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-sns_topic",
      "name": "stag-consumer-sns_topic",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-sns_topic\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-sns_topic",
      "description": "stag producer-sns_topic policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-sns_topic",
      "name": "stag-producer-sns_topic",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-sns_topic\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-sns_topic",
      "name": "stag-consumer-sns_topic",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-sns_topic",
      "roles": [
        "stag-consumer-sns_topic"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-sns_topic",
      "name": "stag-producer-sns_topic",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-sns_topic",
      "roles": [
        "stag-producer-sns_topic"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-sns_topic",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-03-04T18:28:26Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-sns_topic",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-sns_topic"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-sns_topic",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDB6AW27SUI"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-sns_topic",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-03-04T18:28:26Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-sns_topic",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-sns_topic"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-sns_topic",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDFQPS4HQQD"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-sns_topic",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-sns_topic",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-sns_topic",
      "id": "92880436-0861-4e3e-a5ce-12e7876fb2b1",
      "last_modified": "2021-03-04T18:48:28Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "92880436-0861-4e3e-a5ce-12e7876fb2b1"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-sns_topic",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-sns_topic",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-sns_topic",
      "handler": "fetchers/index.snsTopic",
      "id": "stag-consumer-sns_topic",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-sns_topic/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:34:19.337+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-sns_topic:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-sns_topic",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "source_code_size": 298,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-09567f8603f553ad4"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-sns_topic",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-sns_topic",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-sns_topic",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-sns_topic",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-sns_topic/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:34:21.384+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-sns_topic:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-sns_topic",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "source_code_size": 298,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0a7db724a45b0c900"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-sns_topic",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-sns_topic",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-09567f8603f553ad4",
      "description": "stag consumer-sns_topic securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-09567f8603f553ad4",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-sns_topic",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-sns_topic-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0a7db724a45b0c900",
      "description": "stag producer-sns_topic securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0a7db724a45b0c900",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-sns_topic",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-sns_topic-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-sns_topic",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-sns_topic",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-sns_topic",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-sqs_queue",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-sqs_queue",
      "is_enabled": true,
      "name": "stag-producer-sqs_queue",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(26/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-sqs_queue",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-sqs_queue-stag_sqs_queue_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-sqs_queue",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_sqs_queue_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-sqs_queue",
      "description": "stag consumer-sqs_queue policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-sqs_queue",
      "name": "stag-consumer-sqs_queue",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-sqs_queue\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-sqs_queue",
      "description": "stag producer-sqs_queue policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-sqs_queue",
      "name": "stag-producer-sqs_queue",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-sqs_queue\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-sqs_queue",
      "name": "stag-consumer-sqs_queue",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-sqs_queue",
      "roles": [
        "stag-consumer-sqs_queue"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-sqs_queue",
      "name": "stag-producer-sqs_queue",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-sqs_queue",
      "roles": [
        "stag-producer-sqs_queue"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-sqs_queue",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-02-25T14:59:03Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-sqs_queue",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-sqs_queue"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-sqs_queue",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDF6J3LVIBC"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-sqs_queue",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-02-25T14:59:03Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-sqs_queue",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-sqs_queue"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-sqs_queue",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDKFLJING3G"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-sqs_queue",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-sqs_queue",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-sqs_queue",
      "id": "5066c894-2338-4463-8266-dadf094d1c82",
      "last_modified": "2021-02-25T15:05:57Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "5066c894-2338-4463-8266-dadf094d1c82"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-sqs_queue",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-sqs_queue",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-sqs_queue",
      "handler": "fetchers/index.sqsQueue",
      "id": "stag-consumer-sqs_queue",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-sqs_queue/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:31:29.391+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-sqs_queue:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-sqs_queue",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0405677768511452f"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-sqs_queue",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-sqs_queue",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-sqs_queue",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-sqs_queue",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-sqs_queue/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:31:30.160+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-sqs_queue:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-sqs_queue",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-073fac9c0f14b3fe2"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-sqs_queue",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-sqs_queue",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0405677768511452f",
      "description": "stag consumer-sqs_queue securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0405677768511452f",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-sqs_queue",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-sqs_queue-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-073fac9c0f14b3fe2",
      "description": "stag producer-sqs_queue securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-073fac9c0f14b3fe2",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-sqs_queue",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-sqs_queue-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-sqs_queue",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-sqs_queue",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-sqs_queue",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-ssm_parameter",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-ssm_parameter",
      "is_enabled": true,
      "name": "stag-producer-ssm_parameter",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(7/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-ssm_parameter",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-ssm_parameter-stag_ssm_parameter_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-ssm_parameter",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_ssm_parameter_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-ssm_parameter",
      "description": "stag consumer-ssm_parameter policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-ssm_parameter",
      "name": "stag-consumer-ssm_parameter",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-ssm_parameter\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-ssm_parameter",
      "description": "stag producer-ssm_parameter policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-ssm_parameter",
      "name": "stag-producer-ssm_parameter",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-ssm_parameter\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-ssm_parameter",
      "name": "stag-consumer-ssm_parameter",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-ssm_parameter",
      "roles": [
        "stag-consumer-ssm_parameter"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-ssm_parameter",
      "name": "stag-producer-ssm_parameter",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-ssm_parameter",
      "roles": [
        "stag-producer-ssm_parameter"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-ssm_parameter",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-11-30T09:39:54Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-ssm_parameter",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-ssm_parameter"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-ssm_parameter",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDMAUAZACVL"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-ssm_parameter",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-11-30T09:39:54Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-ssm_parameter",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-ssm_parameter"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-ssm_parameter",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDGTCCEUHA3"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-ssm_parameter",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-ssm_parameter",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-ssm_parameter",
      "id": "cafdcf04-0d91-4c96-b411-827596995ebf",
      "last_modified": "2021-01-08T13:34:40Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "cafdcf04-0d91-4c96-b411-827596995ebf"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-ssm_parameter",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-ssm_parameter",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-ssm_parameter",
      "handler": "fetchers/index.ssmParameter",
      "id": "stag-consumer-ssm_parameter",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-ssm_parameter/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:33:01.118+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-ssm_parameter:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-ssm_parameter",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-05be3e13cda933163"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-ssm_parameter",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-ssm_parameter",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-ssm_parameter",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-ssm_parameter",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-ssm_parameter/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:56.088+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-ssm_parameter:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-ssm_parameter",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0dda68646616bcb34"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-ssm_parameter",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-ssm_parameter",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-05be3e13cda933163",
      "description": "stag consumer-ssm_parameter securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-05be3e13cda933163",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-ssm_parameter",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-ssm_parameter-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0dda68646616bcb34",
      "description": "stag producer-ssm_parameter securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0dda68646616bcb34",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-ssm_parameter",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-ssm_parameter-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-ssm_parameter",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-ssm_parameter",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-ssm_parameter",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-subnet",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-subnet",
      "is_enabled": true,
      "name": "stag-producer-subnet",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(5/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-subnet",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-subnet-stag_subnet_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-subnet",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_subnet_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-subnet",
      "description": "stag consumer-subnet policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-subnet",
      "name": "stag-consumer-subnet",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-subnet\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-subnet",
      "description": "stag producer-subnet policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-subnet",
      "name": "stag-producer-subnet",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-subnet\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-subnet",
      "name": "stag-consumer-subnet",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-subnet",
      "roles": [
        "stag-consumer-subnet"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-subnet",
      "name": "stag-producer-subnet",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-subnet",
      "roles": [
        "stag-producer-subnet"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-subnet",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-11-29T17:30:29Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-subnet",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-subnet"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-subnet",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDDBVFSZ4OS"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-subnet",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-11-29T17:30:29Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-subnet",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-subnet"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-subnet",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDPVMGE7P6W"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-subnet",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-subnet",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-subnet",
      "id": "17cd8585-d8fa-4008-a089-ccb6db48f698",
      "last_modified": "2021-01-08T13:44:43Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "17cd8585-d8fa-4008-a089-ccb6db48f698"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-subnet",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-subnet",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-subnet",
      "handler": "fetchers/index.subnet",
      "id": "stag-consumer-subnet",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-subnet/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:34:18.284+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-subnet:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-subnet",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0c8056ff8ceac4303"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-subnet",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-subnet",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-subnet",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-subnet",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-subnet/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:34:20.070+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-subnet:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-subnet",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-093690cfaa21cb2fc"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-subnet",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-subnet",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0c8056ff8ceac4303",
      "description": "stag consumer-subnet securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0c8056ff8ceac4303",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-subnet",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-subnet-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-093690cfaa21cb2fc",
      "description": "stag producer-subnet securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-093690cfaa21cb2fc",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-subnet",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-subnet-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-subnet",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-subnet",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-subnet",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_additional_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-additional-terraform-mapper",
      "description": "stag consumer-additional-terraform-mapper policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-additional-terraform-mapper",
      "name": "stag-consumer-additional-terraform-mapper",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n       \"s3:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_additional_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-additional-terraform-mapper",
      "name": "stag-consumer-additional-terraform-mapper",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-additional-terraform-mapper",
      "roles": [
        "stag-consumer-terraform_mapper"
      ],
      "users": []
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-terraform_mapper",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-terraform_mapper",
      "is_enabled": true,
      "name": "stag-producer-terraform_mapper",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "rate(5 minutes)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-terraform_mapper",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-terraform_mapper-stag_terraform_mapper_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-terraform_mapper",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_terraform_mapper_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-terraform_mapper",
      "description": "stag consumer-terraform_mapper policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-terraform_mapper",
      "name": "stag-consumer-terraform_mapper",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-terraform_mapper\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-terraform_mapper",
      "description": "stag producer-terraform_mapper policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-terraform_mapper",
      "name": "stag-producer-terraform_mapper",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-terraform_mapper\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-terraform_mapper",
      "name": "stag-consumer-terraform_mapper",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-terraform_mapper",
      "roles": [
        "stag-consumer-terraform_mapper"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-terraform_mapper",
      "name": "stag-producer-terraform_mapper",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-terraform_mapper",
      "roles": [
        "stag-producer-terraform_mapper"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-terraform_mapper",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-08T12:13:02Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-terraform_mapper",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-additional-terraform-mapper",
        "arn:aws:iam::012345678901:policy/stag-consumer-terraform_mapper"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-terraform_mapper",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDKK6T4LA5A"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-terraform_mapper",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-12-05T16:17:23Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-terraform_mapper",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-terraform_mapper"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-terraform_mapper",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDKPH323BER"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 10,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-terraform_mapper",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-terraform_mapper",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-terraform_mapper",
      "id": "aef2d862-a637-4d9e-b37d-e0d7ba4dd8fa",
      "last_modified": "2021-01-08T14:55:51Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "aef2d862-a637-4d9e-b37d-e0d7ba4dd8fa"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-terraform_mapper",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-terraform_mapper",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production",
            "S3_BUCKET": "stag-infralight-states"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-terraform_mapper",
      "handler": "fetchers/index.terraformMapper",
      "id": "stag-consumer-terraform_mapper",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-terraform_mapper/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:34:55.891+0000",
      "layers": [],
      "memory_size": 1280,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-terraform_mapper:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-terraform_mapper",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0b6e099a774e40412"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-terraform_mapper",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-terraform_mapper",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-terraform_mapper",
      "handler": "producers/terraformMapperProducer.handler",
      "id": "stag-producer-terraform_mapper",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-terraform_mapper/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:34:57.903+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-terraform_mapper:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-terraform_mapper",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-066f5cec8a172ecb8"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-terraform_mapper",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-terraform_mapper",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0b6e099a774e40412",
      "description": "stag consumer-terraform_mapper securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0b6e099a774e40412",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-terraform_mapper",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-terraform_mapper-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-066f5cec8a172ecb8",
      "description": "stag producer-terraform_mapper securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-066f5cec8a172ecb8",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-terraform_mapper",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-terraform_mapper-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-terraform_mapper",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-terraform_mapper",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-terraform_mapper",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
      "output_base64sha256": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",
      "output_md5": "d41d8cd98f00b204e9800998ecf8427e",
      "output_path": "lambda_function.zip",
      "output_sha": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
      "output_size": 0,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-tfc_state_updater",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-tfc_state_updater",
      "is_enabled": true,
      "name": "stag-producer-tfc_state_updater",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "rate(1 minute)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-tfc_state_updater",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-tfc_state_updater-stag_tfc_state_updater_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-tfc_state_updater",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_tfc_state_updater_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-tfc_state_updater",
      "description": "stag consumer-tfc_state_updater policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-tfc_state_updater",
      "name": "stag-consumer-tfc_state_updater",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-tfc_state_updater\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-tfc_state_updater",
      "description": "stag producer-tfc_state_updater policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-tfc_state_updater",
      "name": "stag-producer-tfc_state_updater",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-tfc_state_updater\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-tfc_state_updater",
      "name": "stag-consumer-tfc_state_updater",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-tfc_state_updater",
      "roles": [
        "stag-consumer-tfc_state_updater"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-tfc_state_updater",
      "name": "stag-producer-tfc_state_updater",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-tfc_state_updater",
      "roles": [
        "stag-producer-tfc_state_updater"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-tfc_state_updater",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-03-15T19:18:32Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-tfc_state_updater",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-tfc_state_updater"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-tfc_state_updater",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDEWTDH2PHM"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-tfc_state_updater",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-03-15T19:18:32Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-tfc_state_updater",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-tfc_state_updater"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-tfc_state_updater",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDB375TA4GI"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 1,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-tfc_state_updater",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-tfc_state_updater",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-tfc_state_updater",
      "id": "7e42d39f-d83a-4a17-8dfa-baebe786ce7c",
      "last_modified": "2021-03-15T19:23:15Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "7e42d39f-d83a-4a17-8dfa-baebe786ce7c"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-tfc_state_updater",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "AUTH0_AUDIENCE": "infralight-api",
            "AUTH0_CLIENT_ID": "kEjj2QkFV5D7Eny44IcuCerSJ0iCtmAk",
            "AUTH0_CLIENT_SECRET": "vkoPLyAGz4d4biAhJOMBL9qxtgq7OKIwCUQbgzXAku3TcAi-7PfgAOrIdr_Mz50F",
            "AUTH0_DOMAIN": "stagauth.infralight.cloud",
            "BACKEND_URL": "https://stagapi.infralight.cloud/api",
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-tfc_state_updater",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production",
            "SECRET": "ic7vU8A82pBaOBIfzMqUy3c"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-tfc_state_updater",
      "handler": "fetchers/index.tfcStateUpdater",
      "id": "stag-consumer-tfc_state_updater",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-tfc_state_updater/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:10:38.482+0000",
      "layers": [],
      "memory_size": 2048,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-tfc_state_updater:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-tfc_state_updater",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "+AMVe6/HBWzn23YFlS0dz1AYJnr+vT5HYXBOJNBXD08=",
      "source_code_size": 28689348,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-06c1ee0671b5d93ba"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-tfc_state_updater",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-tfc_state_updater",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-tfc_state_updater",
      "handler": "producers/tfcStateUpdaterProducer.handler",
      "id": "stag-producer-tfc_state_updater",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-tfc_state_updater/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:08:35.148+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-tfc_state_updater:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-tfc_state_updater",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "y2msPThQ+U0UTHuEOIMl33qOGaZFhOwqMNzyInYAemQ=",
      "source_code_size": 16332536,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-00cc6520684da8535"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-tfc_state_updater",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-tfc_state_updater",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-06c1ee0671b5d93ba",
      "description": "stag consumer-tfc_state_updater securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-06c1ee0671b5d93ba",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-tfc_state_updater",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-tfc_state_updater-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-00cc6520684da8535",
      "description": "stag producer-tfc_state_updater securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-00cc6520684da8535",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-tfc_state_updater",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-tfc_state_updater-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-tfc_state_updater",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-tfc_state_updater",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-tfc_state_updater",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
      "output_base64sha256": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",
      "output_md5": "d41d8cd98f00b204e9800998ecf8427e",
      "output_path": "lambda_function.zip",
      "output_sha": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-transit_gateway",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-transit_gateway",
      "is_enabled": true,
      "name": "stag-producer-transit_gateway",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(12/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-transit_gateway-stag_transit_gateway_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-transit_gateway",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_transit_gateway_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway",
      "description": "stag consumer-transit_gateway policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway",
      "name": "stag-consumer-transit_gateway",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway",
      "description": "stag producer-transit_gateway policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway",
      "name": "stag-producer-transit_gateway",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-transit_gateway",
      "name": "stag-consumer-transit_gateway",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway",
      "roles": [
        "stag-consumer-transit_gateway"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-transit_gateway",
      "name": "stag-producer-transit_gateway",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway",
      "roles": [
        "stag-producer-transit_gateway"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-transit_gateway",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-25T08:13:38Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-transit_gateway",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-transit_gateway",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDN36ZFXRK6"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-transit_gateway",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-25T08:13:38Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-transit_gateway",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-transit_gateway",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDJXK4TCDEH"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway",
      "id": "45b15220-8531-4f25-92c3-fff4eeb8c564",
      "last_modified": "2021-01-25T08:40:17Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "45b15220-8531-4f25-92c3-fff4eeb8c564"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-transit_gateway",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-transit_gateway",
      "handler": "fetchers/index.transitGateway",
      "id": "stag-consumer-transit_gateway",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:38.825+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-transit_gateway",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-05c71076a2f1635e6"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-transit_gateway",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-transit_gateway",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-transit_gateway",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:34.167+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-transit_gateway",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0760f09a9bc8a30c6"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-transit_gateway",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-transit_gateway",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-05c71076a2f1635e6",
      "description": "stag consumer-transit_gateway securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-05c71076a2f1635e6",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-transit_gateway",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-transit_gateway-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0760f09a9bc8a30c6",
      "description": "stag producer-transit_gateway securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0760f09a9bc8a30c6",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-transit_gateway",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-transit_gateway-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-transit_gateway",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-transit_gateway",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
      "output_base64sha256": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",
      "output_md5": "d41d8cd98f00b204e9800998ecf8427e",
      "output_path": "lambda_function.zip",
      "output_sha": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-transit_gateway_multicast_domain_table",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-transit_gateway_multicast_domain_table",
      "is_enabled": true,
      "name": "stag-producer-transit_gateway_multicast_domain_table",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(16/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway_multicast_domain_table",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-transit_gateway_multicast_domain_table-stag_transit_gateway_multicast_domain_table_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-transit_gateway_multicast_domain_table",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_transit_gateway_multicast_domain_table_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway_multicast_domain_table",
      "description": "stag consumer-transit_gateway_multicast_domain_table policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway_multicast_domain_table",
      "name": "stag-consumer-transit_gateway_multicast_domain_table",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway_multicast_domain_table\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway_multicast_domain_table",
      "description": "stag producer-transit_gateway_multicast_domain_table policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway_multicast_domain_table",
      "name": "stag-producer-transit_gateway_multicast_domain_table",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway_multicast_domain_table\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-transit_gateway_multicast_domain_table",
      "name": "stag-consumer-transit_gateway_multicast_domain_table",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway_multicast_domain_table",
      "roles": [
        "stag-consumer-transit_gateway_multicast_domain_table"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-transit_gateway_multicast_domain_table",
      "name": "stag-producer-transit_gateway_multicast_domain_table",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway_multicast_domain_table",
      "roles": [
        "stag-producer-transit_gateway_multicast_domain_table"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-transit_gateway_multicast_domain_table",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-25T08:13:39Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-transit_gateway_multicast_domain_table",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway_multicast_domain_table"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-transit_gateway_multicast_domain_table",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDDE3YYANCM"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-transit_gateway_multicast_domain_table",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-25T08:13:39Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-transit_gateway_multicast_domain_table",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway_multicast_domain_table"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-transit_gateway_multicast_domain_table",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDHGFUYHXTU"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway_multicast_domain_table",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_multicast_domain_table",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_multicast_domain_table",
      "id": "620a4f8d-59f5-4192-ae43-6ae7477ae88c",
      "last_modified": "2021-01-25T08:33:45Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "620a4f8d-59f5-4192-ae43-6ae7477ae88c"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_multicast_domain_table",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-transit_gateway_multicast_domain_table",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-transit_gateway_multicast_domain_table",
      "handler": "fetchers/index.transitGatewayMulticaseDomain",
      "id": "stag-consumer-transit_gateway_multicast_domain_table",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_multicast_domain_table/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:42.798+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_multicast_domain_table:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-transit_gateway_multicast_domain_table",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-03693f61897b59f29"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway_multicast_domain_table",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-transit_gateway_multicast_domain_table",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-transit_gateway_multicast_domain_table",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-transit_gateway_multicast_domain_table",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway_multicast_domain_table/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:32:38.767+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway_multicast_domain_table:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-transit_gateway_multicast_domain_table",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-03940b756854bf64b"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-transit_gateway_multicast_domain_table",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-transit_gateway_multicast_domain_table",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-03693f61897b59f29",
      "description": "stag consumer-transit_gateway_multicast_domain_table securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-03693f61897b59f29",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-transit_gateway_multicast_domain_table",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-transit_gateway_multicast_domain_table-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-03940b756854bf64b",
      "description": "stag producer-transit_gateway_multicast_domain_table securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-03940b756854bf64b",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-transit_gateway_multicast_domain_table",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-transit_gateway_multicast_domain_table-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway_multicast_domain_table",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-transit_gateway_multicast_domain_table",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-transit_gateway_multicast_domain_table",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-transit_gateway_peering_attachment",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-transit_gateway_peering_attachment",
      "is_enabled": true,
      "name": "stag-producer-transit_gateway_peering_attachment",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(14/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway_peering_attachment",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-transit_gateway_peering_attachment-stag_transit_gateway_peering_attachment_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-transit_gateway_peering_attachment",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_transit_gateway_peering_attachment_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway_peering_attachment",
      "description": "stag consumer-transit_gateway_peering_attachment policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway_peering_attachment",
      "name": "stag-consumer-transit_gateway_peering_attachment",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway_peering_attachment\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway_peering_attachment",
      "description": "stag producer-transit_gateway_peering_attachment policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway_peering_attachment",
      "name": "stag-producer-transit_gateway_peering_attachment",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway_peering_attachment\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-transit_gateway_peering_attachment",
      "name": "stag-consumer-transit_gateway_peering_attachment",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway_peering_attachment",
      "roles": [
        "stag-consumer-transit_gateway_peering_attachment"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-transit_gateway_peering_attachment",
      "name": "stag-producer-transit_gateway_peering_attachment",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway_peering_attachment",
      "roles": [
        "stag-producer-transit_gateway_peering_attachment"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-transit_gateway_peering_attachment",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-25T08:13:38Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-transit_gateway_peering_attachment",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway_peering_attachment"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-transit_gateway_peering_attachment",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDHOX5UDIKR"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-transit_gateway_peering_attachment",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-25T08:13:38Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-transit_gateway_peering_attachment",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway_peering_attachment"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-transit_gateway_peering_attachment",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDLZ2HXITZI"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway_peering_attachment",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_peering_attachment",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_peering_attachment",
      "id": "74c91973-f228-4c81-93bc-46203f0e33fc",
      "last_modified": "2021-01-25T08:27:12Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "74c91973-f228-4c81-93bc-46203f0e33fc"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_peering_attachment",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-transit_gateway_peering_attachment",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-transit_gateway_peering_attachment",
      "handler": "fetchers/index.transitGatewayPeeringAttachment",
      "id": "stag-consumer-transit_gateway_peering_attachment",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_peering_attachment/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:34:13.741+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_peering_attachment:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-transit_gateway_peering_attachment",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-05b37802b8af6f81e"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway_peering_attachment",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-transit_gateway_peering_attachment",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-transit_gateway_peering_attachment",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-transit_gateway_peering_attachment",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway_peering_attachment/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:34:13.243+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway_peering_attachment:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-transit_gateway_peering_attachment",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-01ff5b7cb2207abcc"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-transit_gateway_peering_attachment",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-transit_gateway_peering_attachment",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-05b37802b8af6f81e",
      "description": "stag consumer-transit_gateway_peering_attachment securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-05b37802b8af6f81e",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-transit_gateway_peering_attachment",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-transit_gateway_peering_attachment-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-01ff5b7cb2207abcc",
      "description": "stag producer-transit_gateway_peering_attachment securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-01ff5b7cb2207abcc",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-transit_gateway_peering_attachment",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-transit_gateway_peering_attachment-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway_peering_attachment",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-transit_gateway_peering_attachment",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-transit_gateway_peering_attachment",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-transit_gateway_route_table",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-transit_gateway_route_table",
      "is_enabled": true,
      "name": "stag-producer-transit_gateway_route_table",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(15/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway_route_table",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-transit_gateway_route_table-stag_transit_gateway_route_table_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-transit_gateway_route_table",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_transit_gateway_route_table_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway_route_table",
      "description": "stag consumer-transit_gateway_route_table policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway_route_table",
      "name": "stag-consumer-transit_gateway_route_table",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway_route_table\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway_route_table",
      "description": "stag producer-transit_gateway_route_table policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway_route_table",
      "name": "stag-producer-transit_gateway_route_table",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway_route_table\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-transit_gateway_route_table",
      "name": "stag-consumer-transit_gateway_route_table",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway_route_table",
      "roles": [
        "stag-consumer-transit_gateway_route_table"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-transit_gateway_route_table",
      "name": "stag-producer-transit_gateway_route_table",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway_route_table",
      "roles": [
        "stag-producer-transit_gateway_route_table"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-transit_gateway_route_table",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-25T08:13:41Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-transit_gateway_route_table",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway_route_table"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-transit_gateway_route_table",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDKMXOASC3K"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-transit_gateway_route_table",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-25T08:13:38Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-transit_gateway_route_table",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway_route_table"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-transit_gateway_route_table",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDI4DUJ3MI5"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway_route_table",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_route_table",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_route_table",
      "id": "e90aa604-4b67-41a5-ba0e-f9ece16bbc37",
      "last_modified": "2021-01-25T08:17:42Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "e90aa604-4b67-41a5-ba0e-f9ece16bbc37"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_route_table",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-transit_gateway_route_table",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-transit_gateway_route_table",
      "handler": "fetchers/index.transitGatewayRouteTable",
      "id": "stag-consumer-transit_gateway_route_table",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_route_table/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:31:34.262+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_route_table:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-transit_gateway_route_table",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-05af342eed1e04747"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway_route_table",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-transit_gateway_route_table",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-transit_gateway_route_table",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-transit_gateway_route_table",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway_route_table/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:31:29.054+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway_route_table:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-transit_gateway_route_table",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-09d9c8bbf8bb47094"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-transit_gateway_route_table",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-transit_gateway_route_table",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-05af342eed1e04747",
      "description": "stag consumer-transit_gateway_route_table securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-05af342eed1e04747",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-transit_gateway_route_table",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-transit_gateway_route_table-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-09d9c8bbf8bb47094",
      "description": "stag producer-transit_gateway_route_table securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-09d9c8bbf8bb47094",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-transit_gateway_route_table",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-transit_gateway_route_table-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway_route_table",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-transit_gateway_route_table",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-transit_gateway_route_table",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
      "output_base64sha256": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",
      "output_md5": "d41d8cd98f00b204e9800998ecf8427e",
      "output_path": "lambda_function.zip",
      "output_sha": "da39a3ee5e6b4b0d3255bfef95601890afd80709",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-transit_gateway_vpc_attachment",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-transit_gateway_vpc_attachment",
      "is_enabled": true,
      "name": "stag-producer-transit_gateway_vpc_attachment",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(13/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway_vpc_attachment",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-transit_gateway_vpc_attachment-stag_transit_gateway_vpc_attachment_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-transit_gateway_vpc_attachment",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_transit_gateway_vpc_attachment_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway_vpc_attachment",
      "description": "stag consumer-transit_gateway_vpc_attachment policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway_vpc_attachment",
      "name": "stag-consumer-transit_gateway_vpc_attachment",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway_vpc_attachment\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway_vpc_attachment",
      "description": "stag producer-transit_gateway_vpc_attachment policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway_vpc_attachment",
      "name": "stag-producer-transit_gateway_vpc_attachment",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway_vpc_attachment\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-transit_gateway_vpc_attachment",
      "name": "stag-consumer-transit_gateway_vpc_attachment",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway_vpc_attachment",
      "roles": [
        "stag-consumer-transit_gateway_vpc_attachment"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-transit_gateway_vpc_attachment",
      "name": "stag-producer-transit_gateway_vpc_attachment",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway_vpc_attachment",
      "roles": [
        "stag-producer-transit_gateway_vpc_attachment"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-transit_gateway_vpc_attachment",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-25T08:13:39Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-transit_gateway_vpc_attachment",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-transit_gateway_vpc_attachment"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-transit_gateway_vpc_attachment",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDD7PLPW2JA"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-transit_gateway_vpc_attachment",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-25T08:13:38Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-transit_gateway_vpc_attachment",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-transit_gateway_vpc_attachment"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-transit_gateway_vpc_attachment",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDH5DINYGJB"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway_vpc_attachment",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_vpc_attachment",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_vpc_attachment",
      "id": "1756f599-7d38-4577-a0e0-227c4cc26037",
      "last_modified": "2021-01-25T08:30:29Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "1756f599-7d38-4577-a0e0-227c4cc26037"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_vpc_attachment",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-transit_gateway_vpc_attachment",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-transit_gateway_vpc_attachment",
      "handler": "fetchers/index.transitGatewayVpcAttachment",
      "id": "stag-consumer-transit_gateway_vpc_attachment",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_vpc_attachment/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:31:28.891+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-transit_gateway_vpc_attachment:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-transit_gateway_vpc_attachment",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-01d941f3f5a79c14c"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway_vpc_attachment",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-transit_gateway_vpc_attachment",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-transit_gateway_vpc_attachment",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-transit_gateway_vpc_attachment",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway_vpc_attachment/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:31:28.777+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-transit_gateway_vpc_attachment:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-transit_gateway_vpc_attachment",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0b3fccee394c426db"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-transit_gateway_vpc_attachment",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-transit_gateway_vpc_attachment",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-01d941f3f5a79c14c",
      "description": "stag consumer-transit_gateway_vpc_attachment securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-01d941f3f5a79c14c",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-transit_gateway_vpc_attachment",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-transit_gateway_vpc_attachment-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0b3fccee394c426db",
      "description": "stag producer-transit_gateway_vpc_attachment securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0b3fccee394c426db",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-transit_gateway_vpc_attachment",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-transit_gateway_vpc_attachment-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-transit_gateway_vpc_attachment",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-transit_gateway_vpc_attachment",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-transit_gateway_vpc_attachment",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  },
  {
    "type": "aws_ami",
    "name": "ubuntu",
    "attributes": {
      "architecture": "x86_64",
      "arn": "arn:aws:ec2:us-west-2::image/ami-07e573cdaa16d4e61",
      "block_device_mappings": [
        {
          "device_name": "/dev/sda1",
          "ebs": {
            "delete_on_termination": "true",
            "encrypted": "false",
            "iops": "0",
            "snapshot_id": "snap-00adfa1d1e67f8dd0",
            "throughput": "0",
            "volume_size": "8",
            "volume_type": "gp2"
          },
          "no_device": "",
          "virtual_name": ""
        },
        {
          "device_name": "/dev/sdb",
          "ebs": {},
          "no_device": "",
          "virtual_name": "ephemeral0"
        },
        {
          "device_name": "/dev/sdc",
          "ebs": {},
          "no_device": "",
          "virtual_name": "ephemeral1"
        }
      ],
      "creation_date": "2021-03-16T00:50:47.000Z",
      "description": "Canonical, Ubuntu, 20.04 LTS, amd64 focal image build on 2021-03-15",
      "ena_support": true,
      "executable_users": null,
      "filter": [
        {
          "name": "name",
          "values": [
            "ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*"
          ]
        },
        {
          "name": "virtualization-type",
          "values": [
            "hvm"
          ]
        }
      ],
      "hypervisor": "xen",
      "id": "ami-07e573cdaa16d4e61",
      "image_id": "ami-07e573cdaa16d4e61",
      "image_location": "099720109477/ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-20210315",
      "image_owner_alias": null,
      "image_type": "machine",
      "kernel_id": null,
      "most_recent": true,
      "name": "ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-20210315",
      "name_regex": null,
      "owner_id": "099720109477",
      "owners": [
        "099720109477"
      ],
      "platform": null,
      "platform_details": "Linux/UNIX",
      "product_codes": [],
      "public": true,
      "ramdisk_id": null,
      "root_device_name": "/dev/sda1",
      "root_device_type": "ebs",
      "root_snapshot_id": "snap-00adfa1d1e67f8dd0",
      "sriov_net_support": "simple",
      "state": "available",
      "state_reason": {
        "code": "UNSET",
        "message": "UNSET"
      },
      "tags": {},
      "usage_operation": "RunInstances",
      "virtualization_type": "hvm"
    }
  },
  {
    "type": "aws_region",
    "name": "current",
    "attributes": {
      "description": "US West (Oregon)",
      "endpoint": "ec2.us-west-2.amazonaws.com",
      "id": "us-west-2",
      "name": "us-west-2"
    }
  },
  {
    "type": "aws_eip",
    "name": "vault",
    "attributes": {
      "allocation_id": null,
      "associate_with_private_ip": null,
      "association_id": "eipassoc-04f7d2487264f547f",
      "carrier_ip": "",
      "customer_owned_ip": "",
      "customer_owned_ipv4_pool": "",
      "domain": "vpc",
      "id": "eipalloc-07c851190fdc9238d",
      "instance": "i-0721ec3804859dcf9",
      "network_border_group": "us-west-2",
      "network_interface": "eni-071932654985b2de5",
      "private_dns": "ip-10-1-0-108.us-west-2.compute.internal",
      "private_ip": "10.1.0.108",
      "public_dns": "ec2-44-237-27-117.us-west-2.compute.amazonaws.com",
      "public_ip": "44.237.27.117",
      "public_ipv4_pool": "amazon",
      "tags": {
        "Name": "stag-Vault"
      },
      "timeouts": null,
      "vpc": true
    }
  },
  {
    "type": "aws_eip_association",
    "name": "vault",
    "attributes": {
      "allocation_id": "eipalloc-07c851190fdc9238d",
      "allow_reassociation": true,
      "id": "eipassoc-04f7d2487264f547f",
      "instance_id": "i-0721ec3804859dcf9",
      "network_interface_id": "eni-071932654985b2de5",
      "private_ip_address": "10.1.0.108",
      "public_ip": "44.237.27.117"
    }
  },
  {
    "type": "aws_iam_instance_profile",
    "name": "vault",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:instance-profile/stag-vault",
      "create_date": "2020-12-01T12:02:49Z",
      "id": "stag-vault",
      "name": "stag-vault",
      "name_prefix": null,
      "path": "/",
      "role": "stag_vault_role",
      "unique_id": "AIPARMDQF5IDG3OWWT2H2"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "vault",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag_vault_role",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-12-01T12:02:46Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag_vault_role",
      "inline_policy": [
        {
          "name": "stag_vault_policy",
          "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n"
        }
      ],
      "managed_policy_arns": [],
      "max_session_duration": 3600,
      "name": "stag_vault_role",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {
        "env": "stag",
        "name": "vault"
      },
      "unique_id": "AROARMDQF5IDF3EWBAX5I"
    }
  },
  {
    "type": "aws_iam_role_policy",
    "name": "vault",
    "attributes": {
      "id": "stag_vault_role:stag_vault_policy",
      "name": "stag_vault_policy",
      "name_prefix": null,
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"s3:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    }\n  ]\n}\n",
      "role": "stag_vault_role"
    }
  },
  {
    "type": "aws_instance",
    "name": "vault",
    "attributes": {
      "ami": "ami-089668cd321f3cf82",
      "arn": "arn:aws:ec2:us-west-2:012345678901:instance/i-0721ec3804859dcf9",
      "associate_public_ip_address": true,
      "availability_zone": "us-west-2a",
      "cpu_core_count": 1,
      "cpu_threads_per_core": 1,
      "credit_specification": [
        {
          "cpu_credits": "standard"
        }
      ],
      "disable_api_termination": false,
      "ebs_block_device": [],
      "ebs_optimized": false,
      "enclave_options": [
        {
          "enabled": false
        }
      ],
      "ephemeral_block_device": [],
      "get_password_data": false,
      "hibernation": false,
      "host_id": null,
      "iam_instance_profile": "stag-vault",
      "id": "i-0721ec3804859dcf9",
      "instance_initiated_shutdown_behavior": null,
      "instance_state": "running",
      "instance_type": "t2.micro",
      "ipv6_address_count": 0,
      "ipv6_addresses": [],
      "key_name": "stag",
      "metadata_options": [
        {
          "http_endpoint": "enabled",
          "http_put_response_hop_limit": 1,
          "http_tokens": "optional"
        }
      ],
      "monitoring": false,
      "network_interface": [],
      "outpost_arn": "",
      "password_data": "",
      "placement_group": "",
      "primary_network_interface_id": "eni-071932654985b2de5",
      "private_dns": "ip-10-1-0-108.us-west-2.compute.internal",
      "private_ip": "10.1.0.108",
      "public_dns": "ec2-44-237-27-117.us-west-2.compute.amazonaws.com",
      "public_ip": "44.237.27.117",
      "root_block_device": [
        {
          "delete_on_termination": true,
          "device_name": "/dev/sda1",
          "encrypted": false,
          "iops": 100,
          "kms_key_id": "",
          "tags": {},
          "throughput": 0,
          "volume_id": "vol-0fbdc653a0a297375",
          "volume_size": 8,
          "volume_type": "gp2"
        }
      ],
      "secondary_private_ips": [],
      "security_groups": [],
      "source_dest_check": true,
      "subnet_id": "subnet-093a001e537625da2",
      "tags": {
        "Name": "stag Vault"
      },
      "tenancy": "default",
      "timeouts": null,
      "user_data": "3fa21b7e8fd67c53ace6b8c7ad7564ff276e5eaf",
      "user_data_base64": null,
      "volume_tags": {},
      "vpc_security_group_ids": [
        "sg-0187c85e0666bfc7f"
      ]
    }
  },
  {
    "type": "aws_s3_bucket",
    "name": "vault",
    "attributes": {
      "acceleration_status": "",
      "acl": "private",
      "arn": "arn:aws:s3:::stag-infralight-vault",
      "bucket": "stag-infralight-vault",
      "bucket_domain_name": "stag-infralight-vault.s3.amazonaws.com",
      "bucket_prefix": null,
      "bucket_regional_domain_name": "stag-infralight-vault.s3.us-west-2.amazonaws.com",
      "cors_rule": [],
      "force_destroy": false,
      "grant": [],
      "hosted_zone_id": "Z3BJ6K6RIION7M",
      "id": "stag-infralight-vault",
      "lifecycle_rule": [],
      "logging": [],
      "object_lock_configuration": [],
      "policy": null,
      "region": "us-west-2",
      "replication_configuration": [],
      "request_payer": "BucketOwner",
      "server_side_encryption_configuration": [],
      "tags": {
        "env": "stag"
      },
      "versioning": [
        {
          "enabled": false,
          "mfa_delete": false
        }
      ],
      "website": [],
      "website_domain": null,
      "website_endpoint": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "vault",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0187c85e0666bfc7f",
      "description": "stag vault securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0187c85e0666bfc7f",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "SSH",
          "from_port": 22,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "tcp",
          "security_groups": [],
          "self": false,
          "to_port": 22
        },
        {
          "cidr_blocks": [],
          "description": "vault",
          "from_port": 8200,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "tcp",
          "security_groups": [
            "sg-0b7da4b27b0d9caf0"
          ],
          "self": false,
          "to_port": 8200
        }
      ],
      "name": "stag-vault",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag Vault"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "archive_file",
    "name": "lambda_zip",
    "attributes": {
      "excludes": null,
      "id": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_base64sha256": "IrQxHRlnU+ze33e8HaFY8EuG1q2KTiuAwFbcuEiqmkM=",
      "output_md5": "2ce08b6d08fada3d2c149240bce44160",
      "output_path": "lambda_function.zip",
      "output_sha": "3c53ada410a8ec71780f56079ecaa59722a5d177",
      "output_size": 298,
      "source": [],
      "source_content": null,
      "source_content_filename": null,
      "source_dir": null,
      "source_file": "dependencies/lambda_index.js",
      "type": "zip"
    }
  },
  {
    "type": "aws_cloudwatch_event_rule",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-vpc",
      "description": "Triggering producer",
      "event_bus_name": "default",
      "event_pattern": null,
      "id": "stag-producer-vpc",
      "is_enabled": true,
      "name": "stag-producer-vpc",
      "name_prefix": "",
      "role_arn": "",
      "schedule_expression": "cron(6/30 * * * ? *)",
      "tags": {}
    }
  },
  {
    "type": "aws_cloudwatch_event_target",
    "name": "producer_trigger",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-vpc",
      "batch_target": [],
      "dead_letter_config": [],
      "ecs_target": [],
      "event_bus_name": "default",
      "id": "stag-producer-vpc-stag_vpc_producer_lambda",
      "input": "",
      "input_path": "",
      "input_transformer": [],
      "kinesis_target": [],
      "retry_policy": [],
      "role_arn": "",
      "rule": "stag-producer-vpc",
      "run_command_targets": [],
      "sqs_target": [],
      "target_id": "stag_vpc_producer_lambda"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "consumer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-consumer-vpc",
      "description": "stag consumer-vpc policy",
      "id": "arn:aws:iam::012345678901:policy/stag-consumer-vpc",
      "name": "stag-consumer-vpc",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\",\n        \"sts:AssumeRole\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:ReceiveMessage\",\n        \"sqs:DeleteMessage\",\n        \"sqs:Get*\",\n        \"sqs:List*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-vpc\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy",
    "name": "producer_policy",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:policy/stag-producer-vpc",
      "description": "stag producer-vpc policy",
      "id": "arn:aws:iam::012345678901:policy/stag-producer-vpc",
      "name": "stag-producer-vpc",
      "name_prefix": null,
      "path": "/",
      "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"ec2:CreateNetworkInterface\",\n        \"ec2:DescribeNetworkInterfaces\",\n        \"ec2:DeleteNetworkInterface\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Action\": [\n        \"sqs:Send*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": \"arn:aws:sqs:us-west-2:012345678901:stag-producer-vpc\"\n    }\n  ]\n}\n"
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "consumer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-consumer-vpc",
      "name": "stag-consumer-vpc",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-consumer-vpc",
      "roles": [
        "stag-consumer-vpc"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_policy_attachment",
    "name": "producer_attachment",
    "attributes": {
      "groups": [],
      "id": "stag-producer-vpc",
      "name": "stag-producer-vpc",
      "policy_arn": "arn:aws:iam::012345678901:policy/stag-producer-vpc",
      "roles": [
        "stag-producer-vpc"
      ],
      "users": []
    }
  },
  {
    "type": "aws_iam_role",
    "name": "consumer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-consumer-vpc",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2021-01-08T12:12:58Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-consumer-vpc",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-consumer-vpc"
      ],
      "max_session_duration": 3600,
      "name": "stag-consumer-vpc",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDFMJCMKUG7"
    }
  },
  {
    "type": "aws_iam_role",
    "name": "producer_iam_for_lambda",
    "attributes": {
      "arn": "arn:aws:iam::012345678901:role/stag-producer-vpc",
      "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
      "create_date": "2020-11-29T17:44:04Z",
      "description": "",
      "force_detach_policies": false,
      "id": "stag-producer-vpc",
      "inline_policy": [
        {
          "name": "",
          "policy": ""
        }
      ],
      "managed_policy_arns": [
        "arn:aws:iam::012345678901:policy/stag-producer-vpc"
      ],
      "max_session_duration": 3600,
      "name": "stag-producer-vpc",
      "name_prefix": null,
      "path": "/",
      "permissions_boundary": null,
      "tags": {},
      "unique_id": "AROARMDQF5IDBDOZY7OG3"
    }
  },
  {
    "type": "aws_lambda_event_source_mapping",
    "name": "consumer_trigger",
    "attributes": {
      "batch_size": 3,
      "bisect_batch_on_function_error": false,
      "destination_config": [],
      "enabled": true,
      "event_source_arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-vpc",
      "function_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-vpc",
      "function_name": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-vpc",
      "id": "2734b2da-e3bb-4a49-99b5-d8bea3fe71ac",
      "last_modified": "2021-01-08T15:35:12Z",
      "last_processing_result": "",
      "maximum_batching_window_in_seconds": 0,
      "maximum_record_age_in_seconds": 0,
      "maximum_retry_attempts": 0,
      "parallelization_factor": 0,
      "starting_position": null,
      "starting_position_timestamp": null,
      "state": "Enabled",
      "state_transition_reason": "USER_INITIATED",
      "topics": [],
      "uuid": "2734b2da-e3bb-4a49-99b5-d8bea3fe71ac"
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "consumer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-vpc",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-vpc",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-consumer-vpc",
      "handler": "fetchers/index.vpc",
      "id": "stag-consumer-vpc",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-vpc/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:34:08.182+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-consumer-vpc:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-consumer-vpc",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "pN5b0zwwarHq+8YrmbLlcceXFOjaCvTH6dch4pWSXcM=",
      "source_code_size": 28676657,
      "tags": {
        "env": "stag"
      },
      "timeout": 300,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0f8016bdc9dab870d"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_function",
    "name": "producer_lambda",
    "attributes": {
      "arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-vpc",
      "code_signing_config_arn": "",
      "dead_letter_config": [],
      "description": "",
      "environment": [
        {
          "variables": {
            "FETCHER_SQS": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-vpc",
            "MONGODB_ENCRYPTION_KEY": "inMKl6OsudATYEpcYR9M3iAGnH29tZcg3",
            "MONGODB_URI": "mongodb+srv://superadmin:gyAprRA9zd5nOVJl@cinfra.wbgdd.mongodb.net/cyorch?retryWrites=true&w=majority",
            "NODE_ENV": "production"
          }
        }
      ],
      "file_system_config": [],
      "filename": "lambda_function.zip",
      "function_name": "stag-producer-vpc",
      "handler": "producers/regionalProducer.handler",
      "id": "stag-producer-vpc",
      "image_config": [],
      "image_uri": "",
      "invoke_arn": "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-west-2:012345678901:function:stag-producer-vpc/invocations",
      "kms_key_arn": "",
      "last_modified": "2021-03-16T20:33:43.324+0000",
      "layers": [],
      "memory_size": 128,
      "package_type": "Zip",
      "publish": false,
      "qualified_arn": "arn:aws:lambda:us-west-2:012345678901:function:stag-producer-vpc:$LATEST",
      "reserved_concurrent_executions": -1,
      "role": "arn:aws:iam::012345678901:role/stag-producer-vpc",
      "runtime": "nodejs12.x",
      "s3_bucket": null,
      "s3_key": null,
      "s3_object_version": null,
      "signing_job_arn": "",
      "signing_profile_version_arn": "",
      "source_code_hash": "GrGx7ts6kvvFlc6bVuG3XJOIi+bS6fyKus4QxfglCnk=",
      "source_code_size": 16319997,
      "tags": {
        "env": "stag"
      },
      "timeout": 30,
      "timeouts": null,
      "tracing_config": [
        {
          "mode": "PassThrough"
        }
      ],
      "version": "$LATEST",
      "vpc_config": [
        {
          "security_group_ids": [
            "sg-0990eb072da9b05f9"
          ],
          "subnet_ids": [
            "subnet-05509473b4e239fcb",
            "subnet-0d54c2cefc954de75"
          ],
          "vpc_id": "vpc-06af93201036c0670"
        }
      ]
    }
  },
  {
    "type": "aws_lambda_permission",
    "name": "allow_cloudwatch_to_call_check_foo",
    "attributes": {
      "action": "lambda:InvokeFunction",
      "event_source_token": null,
      "function_name": "stag-producer-vpc",
      "id": "AllowExecutionFromCloudWatch",
      "principal": "events.amazonaws.com",
      "qualifier": "",
      "source_account": null,
      "source_arn": "arn:aws:events:us-west-2:012345678901:rule/stag-producer-vpc",
      "statement_id": "AllowExecutionFromCloudWatch",
      "statement_id_prefix": null
    }
  },
  {
    "type": "aws_security_group",
    "name": "consumer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0f8016bdc9dab870d",
      "description": "stag consumer-vpc securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0f8016bdc9dab870d",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-consumer-vpc",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-consumer-vpc-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_security_group",
    "name": "producer",
    "attributes": {
      "arn": "arn:aws:ec2:us-west-2:012345678901:security-group/sg-0990eb072da9b05f9",
      "description": "stag producer-vpc securitygroup",
      "egress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "id": "sg-0990eb072da9b05f9",
      "ingress": [
        {
          "cidr_blocks": [
            "0.0.0.0/0"
          ],
          "description": "",
          "from_port": 0,
          "ipv6_cidr_blocks": [],
          "prefix_list_ids": [],
          "protocol": "-1",
          "security_groups": [],
          "self": false,
          "to_port": 0
        }
      ],
      "name": "stag-producer-vpc",
      "name_prefix": "",
      "owner_id": "012345678901",
      "revoke_rules_on_delete": false,
      "tags": {
        "Name": "stag-producer-vpc-sg"
      },
      "timeouts": null,
      "vpc_id": "vpc-06af93201036c0670"
    }
  },
  {
    "type": "aws_sqs_queue",
    "name": "fetcher",
    "attributes": {
      "arn": "arn:aws:sqs:us-west-2:012345678901:stag-producer-vpc",
      "content_based_deduplication": false,
      "delay_seconds": 0,
      "fifo_queue": false,
      "id": "https://sqs.us-west-2.amazonaws.com/012345678901/stag-producer-vpc",
      "kms_data_key_reuse_period_seconds": 300,
      "kms_master_key_id": "",
      "max_message_size": 262144,
      "message_retention_seconds": 3600,
      "name": "stag-producer-vpc",
      "name_prefix": null,
      "policy": "",
      "receive_wait_time_seconds": 0,
      "redrive_policy": "",
      "tags": {
        "env": "stag"
      },
      "visibility_timeout_seconds": 43200
    }
  }
]